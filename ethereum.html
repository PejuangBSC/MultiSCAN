<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GATE-ERC :: MULTI CHECKER</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.7.0/css/uikit.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.7.0/js/uikit.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.min.js"></script>

    <link rel="icon" href="https://iconape.com/wp-content/files/oa/207892/svg/gate-io-seeklogo.com.svg" type="image/x-icon">

</head>
<style>
     #scanprogress {
        font-size: 16px;
        color: #0b0808;
      }
      #scanbar {
        text-align: center;
        width:100%;
        height:21px;
        border:1px solid #000;
        margin:5px 0px;
      }
      #bar {
        width:100%;
        background-color:#5b93f3;
        height:100%;
      }
        .binance {
            text-align: center;
            background-color: rgb(250 189 36); /* Ganti dengan warna yang Anda inginkan */
       }
       img:hover {
                transform: scale(1.5); /* You can adjust the scale factor as needed */
            }
        a{
            color:black;
        }
        a:hover{
            color:rgb(0, 4, 128);
        }
        .ijo {
        color: black;
        background-color:rgb(231 255 127);
      }

      .biru {
        color: black;
        background-color:rgb(172, 162, 247);
      }
      
      .merah{
        color: rgb(250, 249, 249);
        background-color:#f5a29f!important;
      }
      .error{
        color: #f9f7f7!important;
        background-color: #ec8a44!important;
      }
      .sering{
        color: #f9f7f7!important;
        background-color: antiquewhite;
      }
      .INCH {
            text-align: center;
        background-color: #f0ebdc; /* Ganti desngan warna yang Anda inginkan */
       }
       .MATCHA {
            text-align: center;
        background-color: #abd2fb; /* Ganti dengan warna yang Anda inginkan */
       }
       .ODOS {
            text-align: center;
        background-color: rgb(220, 255, 231); /* Ganti dengan warna yang Anda inginkan */
       }
        .uk-container {
            width: 96%;
            max-width: none;
        }

        .sticky-header {
            position: -webkit-sticky;
            position: sticky;
            top: 0;
           
        }

        /* Style untuk sel dalam header */
        .sticky-header th {    
            background-color: #c6d8f8;
            font-weight: bold;
            font-size: large;
            text-align: center;
            font-size: 14px;
            height: 20px;
            vertical-align: middle;
            margin: 3px 0px; 
        }

        /* Style untuk isi tabel */
        .table-content {
            overflow-y: auto;
            max-height: 800px; /* Tentukan ketinggian maksimum tabel yang ingin Anda tampilkan */
        }
        .uk-table td, .uk-table th {
            margin: 1px 0px; /* Ubah nilai margin sesuai kebutuhan */
            padding: 2px 1px; /* Ubah nilai padding sesuai kebutuhan */
            font-size: 13px;
            vertical-align: middle;
        }
        .uk-table-striped-custom > tbody > tr:nth-child(4n-3),
        .uk-table-striped-custom > tbody > tr:nth-child(4n-2) {
            background-color: #f0f0f0; /* Warna striping disesuaikan sesuai keinginan Anda */
        }

        .custom-thead input[type="number"] {
            background-color: inherit;
            padding: 5px;
            border: none;
            width: 60px; /* Adjust the width as needed */
            text-align: center; /* Center the text within the input */
        }

        /* Style $ symbol next to the input elements */
        .custom-thead th input[type="number"]::after {
            content: "$";
            margin-left: 0px; /* Adjust the margin as needed */
            color: inherit;
        }

        /* Optional: Style the $ symbol inside the input for better alignment */
        .custom-thead th input[type="number"] {
            padding-right: 0px; /* Adjust the padding as needed */
            box-sizing: border-box;
            color: red;
        }
</style>
<body>
    <hr/>
    <h2  style="color:rgb(12, 34, 233); margin:0px 0px; text-align: center;">GATE ERC :: MULTICHECKER v 7n
        [&nbsp;
        <img id="syncDATA" title="SINKRONISASI DATA" src="https://cdn.icon-icons.com/icons2/2596/PNG/512/database_sync_icon_155524.png" width="26px" />
        <img id="open-modal" title="SETTING DATA" src="https://cdn-icons-png.flaticon.com/512/7588/7588701.png" width="26px" />
        <img  id="cek_wallet" title="STATUS WALLET" src="https://cdn-icons-png.flaticon.com/512/3757/3757881.png" width="26px" />
        &nbsp;]
      </h2>
    <!-- Modal UIKIT -->
    <div id="modal-setting" class="uk-modal-full" uk-modal>
        <div class="uk-modal-dialog">
            <button class="uk-modal-close-full uk-close-large" type="button" uk-close></button>
            <div class="uk-modal-header">
                <h2 class="uk-modal-title">:: SETTING DEX CHECKER</h2>
               
            </div>
            <div class="uk-modal-body">
                <form> 
                    <!-- Grid UIkit untuk 2 kolom -->
                    <div class="uk-grid-small" uk-grid>
                        
                        <div class="uk-width-1-2">
                            
                            <!-- Kolom pertama -->
                            <div class="uk-card uk-card-default uk-card-body">
                                <h3 style="text-align: center; margin: 12px 0px; color: #1317e1;">:: SETINGAN PERMODALAN</h3>
                                <!-- Modal 1INCH -->
                                <h5 style="margin: 12px 0px;color: #e4322c;">Modal 1INCH</h5>

                                <!-- Modal Kecil -->
                                <div class="uk-flex uk-flex-middle ">
                                    <div >
                                        <label for="mKiriKecil1INCH" class="uk-text-primary">Kiri Kecil</label>
                                        <input type="number" id="mKiriKecil1INCH" class="uk-input" value="" required>
                                    </div>
                                    <div >
                                    <label for="mKananKecil1INCH" class="uk-text-success">Kanan Kecil</label>
                                    <input type="number" id="mKananKecil1INCH" class="uk-input" value="" required>
                                </div>
                                </div>


                                <h5 style="margin: 12px 0px; color: #e4322c;">Modal ODOS</h5>                                                    
                            <!-- Modal Kecil -->
                            <div class="uk-flex uk-flex-middle ">
                                <div >
                                    <label for="mKiriKecilODOS" class="uk-text-primary">Kiri Kecil</label>
                                    <input type="number" id="mKiriKecilODOS" class="uk-input" value="" required>
                                </div>
                                <div >
                                <label for="mKananKecilODOS" class="uk-text-success">Kanan Kecil</label>
                                <input type="number" id="mKananKecilODOS" class="uk-input" value="" required>
                            </div>
                            </div>

                                <!-- Modal MATCHA -->
                                <h5 style="margin: 12px 0px; color: #e4322c;">Modal MATCHA</h5>
                            <!-- Modal Kecil -->
                                <div class="uk-flex uk-flex-middle ">
                                <div >
                                    <label for="mKiriKecilMATCHA" class="uk-text-primary">Kiri </label>
                                    <input type="number" id="mKiriKecilMATCHA" class="uk-input" value="" required>
                                </div>
                                <div >
                                    <label for="mKananKecilMATCHA" class="uk-text-success">Kanan </label>
                                    <input type="number" id="mKananKecilMATCHA" class="uk-input" value="" required>
                                </div>
                            </div>
                            
                                <!-- Modal OKEX -->
                                <h5 style="margin: 12px 0px; color: #e4322c;">Modal OKEX</h5>
                            <!-- Modal Kecil -->
                            <div class="uk-flex uk-flex-middle ">
                                <div>
                                    <label for="mKiriKecilOKEX" class="uk-text-primary">Kiri </label>
                                    <input type="number" id="mKiriKecilOKEX" class="uk-input" value="" required>
                                </div>
                                <div>
                                    <label for="mKananKecilOKEX" class="uk-text-success">Kanan </label>
                                    <input type="number" id="mKananKecilOKEX" class="uk-input" value="" required>
                                </div>
                            </div>  
                            </div>
                        </div>
                        <div class="uk-width-1-2">
                            <!-- Kolom kedua -->
                            <div class="uk-card uk-card-default uk-card-body">
                                <h3 style="text-align: center; margin: 12px 0px; color: #1317e1;">:: SETINGAN SCANNER</h3>
                                <div >
                                    <label for="pnl">NICK NAME:</label>
                                    <input type="text" id="user"  class="uk-input" required>
                                    <h5 style="margin: 12px 0px; font-weight: bolder;  color: #2f2ce4; text-align: center;">
                                        <div class="uk-flex uk-flex-middle ">
                                            <div>
                                                <label  class="uk-text-primary">API1 </label>
                                                <input type="text" id="api1" class="uk-input" value="" required>
                                            </div>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <div>
                                                <label  class="uk-text-primary">API2 </label>
                                                <input type="text" id="api2" class="uk-input" value="" required>
                                            </div>
                                        </div>  
                                        <div class="uk-flex uk-flex-middle ">
                                            <div>
                                                <label  class="uk-text-primary">API3 </label>
                                                <input type="text" id="api3" class="uk-input" value="" required>
                                            </div>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <div>
                                                <label  class="uk-text-primary">API4 </label>
                                                <input type="text" id="api4" class="uk-input" value="" required>
                                            </div>
                                        </div>  
                                        <div class="uk-flex uk-flex-middle ">
                                            <div>
                                                <label  class="uk-text-primary">API5 </label>
                                                <input type="text" id="api5" class="uk-input" value="" required>
                                            </div>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <div>
                                                <label  class="uk-text-primary">API6 </label>
                                                <input type="text" id="api6" class="uk-input" value="" required>
                                            </div>
                                        </div>  
                                        <div class="uk-flex uk-flex-middle ">
                                            <div>
                                                <label  class="uk-text-primary">API7 </label>
                                                <input type="text" id="api7" class="uk-input" value="" required>
                                            </div>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <div>
                                                <label  class="uk-text-primary">API8 </label>
                                                <input type="text" id="api8" class="uk-input" value="" required>
                                            </div>
                                        </div>  
                                        <div class="uk-flex uk-flex-middle ">
                                            <div>
                                                <label  class="uk-text-primary">API9 </label>
                                                <input type="text" id="api9" class="uk-input" value="" required>
                                            </div>
                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                            <div>
                                                <label  class="uk-text-primary">API10 </label>
                                                <input type="text" id="api10" class="uk-input" value="" required>
                                            </div>
                                        </div>  
                                    </h5>
                                <h5>
                                    <label for="koin-group" class="uk-text-danger">SCAN PERKOIN : </label>
                                    <label class="uk-form-label uk-text-success"><input class="uk-radio" checked type="radio" value="4" name="koin-group"> 4</label>
                                    <label class="uk-form-label uk-text-success"><input class="uk-radio" type="radio" value="5" name="koin-group"> 5</label>
                                    <label class="uk-form-label uk-text-success"><input class="uk-radio" type="radio" value="6" checkbox name="koin-group"> 6</label> 
                                </h5>
                               </div>

                               <div class="uk-flex uk-flex-middle uk-margin ">
                                <!-- <div style="display: none;"> -->
                                   <div>
                                       <label for="jeda-time-group" class="uk-text-danger">JEDA/GROUP{20}</label><br/>
                                       <input class="uk-input" id="jeda-time-group" type="number" value="20" name="jeda-time-group" >
                                   </div>
                                   <div>
                                       <label for="jeda-koin" class="uk-text-primary">JEDA/KOIN{20}</label><br/>
                                       <input class="uk-input" type="number" id="jeda-koin" value="20" name="jeda-koin" > 
                                   </div>
                                   <div>
                                       <label for="waktu-tunggu" class="uk-text-danger">TIMEOUT/DETIK{5}</label><br/>
                                       <input class="uk-input" id="waktu-tunggu" type="number" value="5" name="waktu-tunggu" >
                                   </div>
                                   <div>
                                       <label for="jeda-koin" class="uk-text-warning">FILTER PNL</label><br/>
                                       <input class="uk-input" type="number" id="inFilterPNL" value="0" name="filterpnl" > 
                                   </div>
                               </div>
                                    <div>
                                    <label class="uk-text-primary">:: SELECT PAIR DEX</label>
                                    <small>
                                        <br/> 
                                        <input type="radio" checked name="dex-radio" value="ETH"> ETH | 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2 | 18 <br/> 
                                        <input type="radio" name="dex-radio" value="USDT"> USDT | 0xdAC17F958D2ee523a2206206994597C13D831ec7 | 6 <br/> 
                                        <input type="radio" name="dex-radio" value="SDEX"> SDEX | 0x5DE8ab7E27f6E7A1fFf3E5B337584Aa43961BEeF | 18 <br/> 
                                        <input type="radio" name="dex-radio" value="BNT"> BNT | 0x1F573D6Fb3F13d689FF844B4cE37794d79a7FF1C | 18 
                                        
                                    </small>
                                    </div>
                                    <div>
                                    <br/><label for="sc-address">SC Address:</label>
                                    <input type="text" id="sc-addresspair" value="" class="uk-input" >
                                    
                                    <label for="des-pair">Des Pair:</label>
                                    <input type="text" id="des-pair" value="" class="uk-input" >
                
                                    <label for="symbo-pair">Symbol Pair:</label>
                                    <input type="text" id="symbol-pair" value="" class="uk-input" > 
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tombol untuk menutup modal -->
                    <p class="uk-text-right">
                        <button class="uk-button uk-button-default uk-modal-close" type="button">Tutup</button>
                        <button type="button" id="save-button" class="uk-button uk-button-primary">SIMPAN</button>  
                    </p>
             
                   
                </form>
            </div>
        </div>
    </div>

    <div class="uk-container uk-margin-top">
        <form>
        <div class="uk-margin">
             <div class="uk-grid uk-child-width-1-5@s " uk-grid>
                <!-- <div class="uk-flex uk-flex-wrap uk-grid-divider"> -->
        
                <div  class="uk-width-auto@m">
                    <div>
                        <label class="uk-form-label uk-text-secondary" > :: SETUP SCANNER </label> <br/>
                        <label class="uk-form-label uk-text-success" >
                            <input type="checkbox" class="uk-checkbox"  checked id="ls" />&nbsp;KIRI <input type="checkbox" class="uk-checkbox" id="kiriSWOOP" /> SWOOP <br/>
                       </label>    
                       <label class="uk-form-label uk-text-success" > 
                           <input type="checkbox" class="uk-checkbox"  checked id="rs" />&nbsp;KANAN <input type="checkbox" class="uk-checkbox" id="kananSWOOP" /> SWOOP <br/>
                       </label> 
                         :: <label class="uk-form-label uk-text-primary" >Filter PNL : </label> <label class="uk-form-label uk-text-warning" id="LFilterPNL" ></label>
                        <br/> <label class="uk-form-label uk-text-warning" id="pairDex" ></label>~ <label class="uk-form-label uk-text-danger" id="LPriceRate" ></label>
                    </div>
                </div>

                <div class="uk-width-auto@m" >
                    <div class="uk-form-label uk-text-secondary" >
                        <label class="uk-form-label uk-text-primary" > :: SETTING APLIKASI </label> <br/>
                        <label class="uk-form-label uk-text-warning" >TOTAL :  </label> <label class="uk-form-label uk-text-primary" id="JmlKoin" ></label> KOIN<br/>
                        <label class="uk-form-label uk-text-success"> GROUP : </label> 
                        <label class="uk-form-label uk-text-primary" id="LKoinGroup" ></label> KOIN
                         <!-- <label class="uk-form-label uk-text-primary" id="LjedaTimeGroup" ></label> -->
                        <br/><label class="uk-form-label uk-text-danger" > TIMEOUT :  </label> 
                         <!-- <label class="uk-form-label uk-text-primary" id="LjedaKoin" ></label> /  -->
                         <label class="uk-form-label uk-text-primary" id="Lwaktu-tunggu" ></label> DETIK
                    </div>
                </div>

                <div  class="uk-width-auto@m">
                    <div>
                        <label class="uk-form-label uk-text-warning" id="server">PILIHAN SERVER : </label>  
                    </div>                                       
                    <div>
                        <label class="uk-form-label uk-text-secondary"><input class="uk-radio" type="radio" value="0" checkbox  name="urlRadio"> 01</label>
                        <label class="uk-form-label uk-text-secondary"><input class="uk-radio" type="radio" value="1" name="urlRadio"> 02</label><br/>
                        <label class="uk-form-label uk-text-secondary"><input class="uk-radio" type="radio" value="2" name="urlRadio"> 03</label>
                        <label class="uk-form-label uk-text-secondary"><input class="uk-radio" type="radio" value="3" name="urlRadio"> 04</label> <br/>
                        <label class="uk-form-label uk-text-secondary"><input class="uk-radio" type="radio" value="4" name="urlRadio"> 05</label>
                        <label class="uk-form-label uk-text-secondary"><input class="uk-radio" type="radio" value="5" name="urlRadio"> 06</label>         
                    </div>
                </div>

                <div  class="uk-width-auto@m">
                    <div>
                        <label class="uk-form-label uk-text-secondary" > MARKET & PAIR DEX</label>                    
                    </div>
                    <label class="uk-form-label uk-text-primary" > 
                        <input type="checkbox" class="uk-checkbox cdx_1inch" checked id="D1INCH" /> <span id="modalLP1INCH">&nbsp;1INCH&nbsp;</span>
                        <input type="checkbox" class="uk-checkbox cdx_matcha" checked id="DMATCHA" /> &nbsp; MATCHA <br/>
                        <input type="checkbox" class="uk-checkbox cdx_odos" checked id="DODOS" /> <span id="modalLPODOS">&nbsp;ODOS&nbsp;</span>                        
                        <input type="checkbox" class="uk-checkbox cdx_okx" checked id="DOKEX" /> &nbsp; OKEX
                    </label> 
                    
                    <br/><input type="checkbox" class="uk-checkbox" style="display: none;" id="Cautorun" /> <span style="display: none;" class="uk-form-label uk-text-danger uk-text-small" id="autorun"> AUTORUN</span>
                    <!-- <button class="uk-button uk-button-small uk-button-primary" type="button" style="display: none;" id="startSCAN">AWAL</button>  
                    <button class="uk-button uk-button-small uk-button-secondary" type="button" style="display: none;" id="startSCAN2">AKHIR</button>   -->
                    <button class="uk-button uk-button-small uk-button-primary" type="button" style="display: none;" id="startSCAN">START</button>   
                    <input type="radio" name="toggle" checked  value="option2"> A
                    <input type="radio" name="toggle" value="option1"> Z 
                    <button class="uk-button uk-button-small uk-button-danger" type="button" id="refresh">STOP</button>
                </div>

                <div class="uk-width-auto@m uk-width-expand@m">
                    <label class="uk-text uk-text-danger" id="ip">...</label> <br/>  
                    <label class="uk-text uk-text-small uk-text-danger" id="cek"></label>                
                    <div class="uk-text uk-text-small uk-text-secondary">
                        <span class="uk-text-bold">1INCH</span> [ <label class="uk-text uk-text-small uk-text-primary" id="sinyal1inch"> </label> ]<br/> 
                        <span class="uk-text-bold">ODOS</span> [ <label class="uk-text uk-text-small uk-text-primary" id="sinyalodos">  </label> ]<br/>
                        <span class="uk-text-bold">MATCHA</span> [ <label class="uk-text uk-text-small uk-text-primary" id="sinyalmatcha"> </label> ]<br/> 
                        <span class="uk-text-bold">OKEX</span> [ <label class="uk-text uk-text-small uk-text-primary" id="sinyalOKEX"> </label> ]<br/> 
                    </div>
                </div>

            </div>  
        </div> 

        </form>

        <label class="uk-text uk-text-success" id="hasil"></label> <div id="scanprogress">Wait</div> 
        <div id="scanbar">
            <div id="bar" style="text-align: center;"> </div>
        </div>
        
    </div>
 <!-- Modal LIST LP 1INCH -->
    <div uk-modal id="myModalLP1INCH">
        <div class="uk-modal-dialog">
          <button class="uk-modal-close-default" type="button" uk-close></button>
          <div class="uk-modal-header">
            <h5 class="uk-modal-title">LIVE :: DAFTAR LP 1INCH</h5>
          </div>
          <div class="uk-modal-body">
            <div id="apiResult1INCH">
              <span id="checkboxLP1INCH"></span>
            </div>
          </div>
          <div class="uk-modal-footer uk-text-right">
            <button class="uk-button uk-button-danger uk-modal-close" type="button">TUTUP</button>
            <button id="simpanlp1inch" class="uk-button uk-button-primary">SIMPAN</button>
          </div>
        </div>
    </div>

    <!-- Modal LIST LP ODOS -->
    <div uk-modal id="myModalLPODOS">
    <div class="uk-modal-dialog">
        <button class="uk-modal-close-default" type="button" uk-close></button>
        <div class="uk-modal-header">
        <h5 class="uk-modal-title">LIVE :: DAFTAR LP ODOS</h5>
        </div>
        <div class="uk-modal-body">
        <div id="apiResultODOS">
            <span id="checkboxLPODOS"></span>
        </div>
        </div>
        <div class="uk-modal-footer uk-text-right">
        <button class="uk-button uk-button-danger uk-modal-close" type="button">TUTUP</button>
        <button id="simpanlpODOS" class="uk-button uk-button-primary">SIMPAN</button>
        </div>
    </div>
    </div>
      
   <!-- TABEL HASIL SCANNER -->
    <div class="uk-container uk-flex-center uk-flex-middle uk-table-hover">
        <div class="tableFixHead table-content">
            <table class="uk-table  uk-sticky uk-table-striped-custom ">
                <thead class="custom-thead uk-overflow-auto sticky-header">
            <!-- <div class="table-content">
                <table class="uk-table uk-sticky uk-table-striped-custom">
                    <thead class="sticky-header"> -->
                    <tr>  <th class="uk-text-secondary"> VOL BUY </th>                           
                        <th  class="uk-text-secondary dx_1inch"> <span class="uk-badge" id="lKiri1INCHSinyal"></span> 1INCH </th>
                        <th  class="uk-text-secondary dx_odos"> <span class="uk-badge" id="lKiriODOSSinyal"></span> ODOS </th>
                        <th class="uk-text-secondary dx_matcha"> <span class="uk-badge" id="lKiriMATCHASinyal"></span> MATCHA</th>
                        <th class="uk-text-secondary dx_okx"> <span class="uk-badge" id="lKiriOKEXSinyal"></span> OKEX</th>
                        <th rowspan="2" style="background-color: #c6d8f8; color: rgb(10, 11, 12);">&nbsp;MODAL <br/>& TOKEN&nbsp;</th>
                        <th  class="uk-text-secondary dx_1inch"> <span class="uk-badge" id="lKanan1INCHSinyal"></span> 1INCH </th>
                        <th  class="uk-text-secondary dx_odos"> <span class="uk-badge" id="lKananODOSSinyal"></span> ODOS </th>
                        <th class="uk-text-secondary dx_matcha"> <span class="uk-badge" id="lKananMATCHASinyal"></span> MATCHA </th>
                        <th class="uk-text-secondary dx_okx"> <span class="uk-badge" id="lKananOKEXSinyal"></span> OKEX </th>
                        <th class="uk-text-secondary"> VOL SELl </th>
                    </tr>
                    <tr>       
                        <th class="uk-text-danger"> PRICE </th>                     
                        <th  class="uk-text-danger dx_1inch"> <input type="number" id="in_mKiriKecil1INCH" class="uk-input" value="" required> $</th>
                        <!-- <th  class="uk-text-danger dx_1inch"> <input type="number" id="in_mKiriBesar1INCH" class="uk-input" value="" required> $</th> -->
                        <th  class="uk-text-danger dx_odos"> <input type="number" id="in_mKiriKecilODOS" class="uk-input" value="" required> $</th>
                        <!-- <th  class="uk-text-danger dx_odos"> <input type="number" id="in_mKiriBesarODOS" class="uk-input" value="" required> $</th> -->
                        <th  class="uk-text-danger dx_matcha"> <input type="number" id="in_mKiriKecilMATCHA" class="uk-input" value="" required> $</th>
                        <th  class="uk-text-danger dx_okx"> <input type="number" id="in_mKiriKecilOKEX" class="uk-input" value="" required> $</th>
                        <th  class="uk-text-danger dx_1inch"> <input type="number" id="in_mKananKecil1INCH" class="uk-input" value="" required> $</th>
                        <!-- <th  class="uk-text-danger dx_1inch"> <input type="number" id="in_mKananBesar1INCH" class="uk-input" value="" required> $</th> -->
                        <th  class="uk-text-danger dx_odos"> <input type="number" id="in_mKananKecilODOS" class="uk-input" value="" required> $</th>
                        <!-- <th  class="uk-text-danger dx_odos"> <input type="number" id="in_mKananBesarODOS" class="uk-input" value="" required> $</th> -->
                        <th  class="uk-text-danger dx_matcha"> <input type="number" id="in_mKananKecilMATCHA" class="uk-input" value="" required> $</th>
                        <th  class="uk-text-danger dx_okx"> <input type="number" id="in_mKananKecilOKEX" class="uk-input" value="" required> $</th>
                        <th class="uk-text-danger"> PRICE </th>
                    </tr>
                </thead>
                
                <tbody id="TabelBINANCE" style="text-align: center;"></tbody>
            </table>
        </div>
    </div>    

<script>
$(document).ready(function () {
        //SETTING GLOBAL
        var user = localStorage.getItem("GME_user");
        var GME_savedData = JSON.parse(localStorage.getItem('GME_DATA_SETTING')) || {};
        var GME_savedDataModal = JSON.parse(localStorage.getItem('GME_DATA_MODAL')) || {};
        var tokens = GME_savedData.LIST_TOKEN || [];
        var GME_savedDataID = JSON.parse(localStorage.getItem('GME_ID'));
        
//        var groupSize = 4;
        //console.log(tokens);
        var groupSize = GME_savedData.KoinGroup; 
        var interval = GME_savedData.jedaTimeGroup; 
        var intervalKoin = GME_savedData.jedaKoin; 
        var autorun = false;
        cekDataAwal();
        setNullInfo();
        createRadioButtons();
        selectPair();
        CekIdentitas();

        function setNullInfo(){
            localStorage.setItem('GME_Kiri1INCHSinyal',0);
            localStorage.setItem('GME_Kanan1INCHSinyal',0);

            localStorage.setItem('GME_KiriODOSSinyal',0);
            localStorage.setItem('GME_KananODOSSinyal',0);
            
            localStorage.setItem('GME_KiriMATCHASinyal',0);
            localStorage.setItem('GME_KananMATCHASinyal',0);

            localStorage.setItem('GME_KiriOKEXSinyal',0);
            localStorage.setItem('GME_KananOKEXSinyal',0);
                
            $("#lKiri1INCHSinyal").text("");
            $("#lKanan1INCHSinyal").text("");

            $("#lKiriODOSSinyal").text("");
            $("#lKananODOSSinyal").text("");

            $("#lKiriMATCHASinyal").text("");
            $("#lKananMATCHASinyal").text("");

            $("#lKiriOKEXSinyal").text("");
            $("#lKananOKEXSinyal").text("");

            $("#sinyal1inch").text("");
            $("#sinyalodos").text("");
            $("#sinyalmatcha").text("");
            $("#sinyalOKEX").text("");

            var dataLPODOS = localStorage.getItem('GME_LPODOS');
            var jumlahLPODOS = dataLPODOS ? JSON.parse(dataLPODOS).length : 0;
            $("#modalLPODOS").text("ODOS [ "+jumlahLPODOS+" ]"); 

            var dataLP1INCH = localStorage.getItem('GME_LP1INCH');
            var jumlahLP1INCH = dataLP1INCH ? JSON.parse(dataLP1INCH).length : 0;
            $("#modalLP1INCH").text("1INCH [ "+jumlahLP1INCH+" ]"); 
        }

        // CEK SEMUA DATA AWAL
        function cekDataAwal(){     
            var GME_LP1INCH = JSON.parse(localStorage.getItem('GME_LP1INCH'));
            var GME_API1INCH = JSON.parse(localStorage.getItem('GME_API1INCH'));
            var GME_LPODOS = JSON.parse(localStorage.getItem('GME_LPODOS'));
            var GME_SERVERCORS = JSON.parse(localStorage.getItem('GME_SERVERCORS'));
            var GME_DATA_MASTER = JSON.parse(localStorage.getItem('GME_DATA_MASTER'));
            var GME_DATA_SETTING = JSON.parse(localStorage.getItem('GME_DATA_SETTING'));
            var GME_DATA_MODAL = JSON.parse(localStorage.getItem('GME_DATA_MODAL'));
            
            
            // Inisialisasi status validasi
            var isDataMasterValid = true;
            var isLP1INCHValid = true;
            var isLPODOSValid = true;
            var isServerCorsValid = true;
            var isDataSettingValid = true;
            var isDataSettingModalValid = true;

            // Validasi GME_DATA_MASTER
            if (GME_DATA_MASTER === null || GME_DATA_MASTER === undefined || Object.keys(GME_DATA_MASTER).length === 0) {
                isDataMasterValid = false;
                $("#cek").append("SINKRONISASI DATA DAHULU!<br/>");
            }

            // Validasi GME_LP1INCH
            if (GME_LP1INCH === null || GME_LP1INCH === undefined || Object.keys(GME_LP1INCH).length === 0) {
                isLP1INCHValid = false;
                $("#cek").append("CEK, SETTING LP 1NCH, PASTIKAN API TELAH TERISI!<br/>");
            }

            // Validasi GME_LPODOS
            if (GME_LPODOS === null || GME_LPODOS === undefined || Object.keys(GME_LPODOS).length === 0) {
                isLPODOSValid = false;
                $("#cek").append("CEK, SETTING LP ODOS!<br/>");
            }

            // Validasi GME_SERVERCORS
            if (GME_SERVERCORS === null || GME_SERVERCORS === undefined) {
                isServerCorsValid = false;
                $("#cek").append("CEK,PIIHAN SERVER!<br/>");
            }

            // Validasi GME_DATA_SETTING
            if (GME_DATA_SETTING === null || GME_DATA_SETTING === undefined || !GME_DATA_SETTING.waktuTunggu || !GME_DATA_SETTING.KoinGroup || Object.keys(GME_DATA_SETTING).length === 0) {
                isDataSettingValid = false;
                $("#cek").append("CEK, SETTINGAN SCANNER !<br/>");
            }else{
                coinTrueStatus();
            }

            // Validasi GME_DATA_MODAL
            if (GME_DATA_MODAL === null || GME_DATA_MODAL === undefined || Object.keys(GME_DATA_MODAL).length === 0) {
                isDataSettingModalValid = false;
                $("#cek").append("CEK, SETTINGAN MODAL !<br/>");
            }

            // Check if any validation fails, hide the button
            if (!isDataMasterValid || !isLP1INCHValid || !isLPODOSValid || !isServerCorsValid || !isDataSettingValid) {
                $("button#startSCAN.uk-button.uk-button-primary").hide();
            } else {
                if(!user){
                    $("#cek").append("NICKNAME HARUS DI ISI !!!<br/>");
                    $("#startSCAN").hide();
                }else{
                    $("button#startSCAN.uk-button.uk-button-primary").show();
                }
            }
            
            if (!($("#D1INCH").prop('checked') || $("#DODOS").prop('checked') || $("#DMATCHA").prop('checked') || $("#DOKEX").prop('checked') )) {
                $("#cek").append("CEK, PILIH DEX<br/>");
                $("button#startSCAN.uk-button.uk-button-primary").hide();
             }           
        }           

        // Function to save checkbox status DEX in local storage
        function saveDEXStatus(checkboxId, status) {
            localStorage.setItem("GME_"+checkboxId, status);
        }

        // Function to get checkbox status from local storage
        function getDEXStatus(checkboxId) {
            return localStorage.getItem("GME_"+checkboxId) === 'true';
        }
        // Function change hitung status coin
        function coinTrueStatus(){
            var countTrueStatus = 0;
                var coinData = GME_savedData.LIST_TOKEN;
                $.each(coinData, function(index, coin) {
                    if (coin.status === true) {
                        countTrueStatus++;
                        var TotalCoins = parseInt(localStorage.setItem('GME_TotalCoins',countTrueStatus));
                    }
                });
            $("#JmlKoin").text(localStorage.getItem('GME_TotalCoins'));    
            $("#pairDex").text(GME_savedData.symbolPair);    
        }

        function dowloadJSON(){
            // Ambil data JSON dari local storage dengan key GME_DATA_SETTING
            var gmbData = localStorage.getItem('GME_DATA_SETTING');
            if(gmbData){
                // Parse JSON
                var jsonData = JSON.parse(gmbData);
                // Buat objek baru hanya dengan LIST_TOKEN
                var listToken = { "LIST_TOKEN": jsonData.LIST_TOKEN };
                // Konversi objek menjadi JSON
                var jsonContent = JSON.stringify(listToken, null, 2);
                // Buat elemen <a> untuk download
                var downloadLink = document.createElement('a');
                downloadLink.href = 'data:application/json;charset=utf-8,' + encodeURIComponent(jsonContent);
                downloadLink.download = localStorage.getItem('GME_TotalCoins')+"_"+"TOKEN.json";
                downloadLink.click();
            } else {
                alert('DATA TOKEN KOSONG');
            }
            
       }

       $('#JmlKoin').on('click', dowloadJSON);

        // Function to create radio buttons dynamically
        function createRadioButtons() {
                // Add event listener for radio button change
                $('input[name="urlRadio"]').on('change', function () {
                    // Store the selected URL in localStorage
                    var selectedUrl = $('input[name="urlRadio"]:checked').val();
                    localStorage.setItem('GME_SERVERCORS', selectedUrl);
                    location.reload();
                });

                // Check the last selected URL if available in localStorage
                var lastSelectedUrl = localStorage.getItem('GME_SERVERCORS');
                if (lastSelectedUrl) {
                    $('input[name="urlRadio"][value="' + lastSelectedUrl + '"]').prop('checked', true);
                }
        }

        // SET FORM INPUT MODAL
        $('#mKiriKecil1INCH').val(GME_savedDataModal.mKiriKecil1INCH || '');
        $('#mKananKecil1INCH').val(GME_savedDataModal.mKananKecil1INCH || '');


        $('#mKiriKecilODOS').val(GME_savedDataModal.mKiriKecilODOS || '');
        $('#mKananKecilODOS').val(GME_savedDataModal.mKananKecilODOS || '');

        $('#mKiriKecilMATCHA').val(GME_savedDataModal.mKiriKecilMATCHA || '');
        $('#mKiriKecilOKEX').val(GME_savedDataModal.mKiriKecilOKEX || '');
        $('#mKananKecilMATCHA').val(GME_savedDataModal.mKananKecilMATCHA || '');
        $('#mKananKecilOKEX').val(GME_savedDataModal.mKananKecilOKEX || '');

        // SET INFO MODAL
        $('#in_mKiriKecil1INCH').val(GME_savedDataModal.mKiriKecil1INCH || '');
        $('#in_mKananKecil1INCH').val(GME_savedDataModal.mKananKecil1INCH || '');


        $('#in_mKiriKecilODOS').val(GME_savedDataModal.mKiriKecilODOS || '');
        $('#in_mKananKecilODOS').val(GME_savedDataModal.mKananKecilODOS || '');

        $('#in_mKiriKecilMATCHA').val(GME_savedDataModal.mKiriKecilMATCHA || '');
        $('#in_mKiriKecilOKEX').val(GME_savedDataModal.mKiriKecilOKEX || '');

        $('#in_mKananKecilMATCHA').val(GME_savedDataModal.mKananKecilMATCHA || '');
        $('#in_mKananKecilOKEX').val(GME_savedDataModal.mKananKecilOKEX || '');

        // SET SETINGAN APLIKASI
        $('#user').val(user || '');
        $('#sc-addresspair').val(GME_savedData.scAddressPair || '');
        $('#des-pair').val(GME_savedData.desPair || '');
        $('#symbol-pair').val(GME_savedData.symbolPair || '');
        $('#waktu-tunggu').val(GME_savedData.waktuTunggu || '');
        $('#inFilterPNL').val(GME_savedData.FilterPNL);
        $('#jeda-time-group').val(GME_savedData.jedaTimeGroup || '');                       
        $('#waktu-tunggu').val(GME_savedData.waktuTunggu || '');

        $('#LjedaTimeGroup').text(GME_savedData.jedaTimeGroup || '');                       
        $('#Lwaktu-tunggu').text(GME_savedData.waktuTunggu || '');
        $('#LKoinGroup').text(GME_savedData.KoinGroup || '');

        $('#LFilterPNL').text(GME_savedData.FilterPNL || '');
        $('#LjedaKoin').text(GME_savedData.jedaKoin || '');
        
        $('input[id^="in_mK"]').on('change', function() {
            updateLocalStorage(); // Call the updateLocalStorage function when any matching input changes
        });
    
        // Initial call to updateLocalStorage to populate with existing values
        updateLocalStorage();
    
        function updateLocalStorage() {
            var modalData = {
                mKiriKecil1INCH: $('#in_mKiriKecil1INCH').val() || '',
                mKananKecil1INCH: $('#in_mKananKecil1INCH').val() || '',
        
                mKiriKecilODOS: $('#in_mKiriKecilODOS').val() || '',
                mKananKecilODOS: $('#in_mKananKecilODOS').val() || '',
        
                mKiriKecilMATCHA: $('#in_mKiriKecilMATCHA').val() || '',
                mKiriKecilOKEX: $('#in_mKiriKecilOKEX').val() || '',

                mKananKecilMATCHA: $('#in_mKananKecilMATCHA').val() || '',
                mKananKecilOKEX: $('#in_mKananKecilOKEX').val() || ''
            };
             localStorage.setItem('GME_DATA_MODAL', JSON.stringify(modalData));
             const apiData = JSON.parse(localStorage.getItem('GME_API1INCH'));

                         // Pastikan data ada dan merupakan array
            if (Array.isArray(apiData)) {
                apiData.forEach((value, index) => {
                // Mengisi input dengan id api1 sampai api10
                // index + 1 karena array dimulai dari 0, sementara id input dimulai dari 1
                $(`#api${index + 1}`).val(value);
                });
            } 
        }

        function setMODAL(){
            var modalData = {
                mKiriKecil1INCH: $('#mKiriKecil1INCH').val() || '',
                mKananKecil1INCH: $('#mKananKecil1INCH').val() || '',

                mKiriKecilODOS: $('#mKiriKecilODOS').val() || '',
                mKananKecilODOS: $('#mKananKecilODOS').val() || '',


                mKiriKecilMATCHA: $('#mKiriKecilMATCHA').val() || '',
                mKiriKecilOKEX: $('#mKiriKecilOKEX').val() || '',

                mKananKecilMATCHA: $('#mKananKecilMATCHA').val() || '',
                mKananKecilOKEX: $('#mKananKecilOKEX').val() || ''
            };
            localStorage.setItem('GME_DATA_MODAL', JSON.stringify(modalData));
          
        }

        function selectPair(){
            $('input[type=radio][name=dex-radio]').change(function() {
        // Cek radio button mana yang dipilih
                if (this.value === 'ETH') {
                    $('#sc-addresspair').val('0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2');
                    $('#des-pair').val('18');
                    $('#symbol-pair').val('ETH');
                }else if (this.value === 'USDT') {
                    $('#sc-addresspair').val('0xdAC17F958D2ee523a2206206994597C13D831ec7');
                    $('#des-pair').val('6');
                    $('#symbol-pair').val('USDT');
                }
                else if (this.value === 'SDEX') {
                    $('#sc-addresspair').val('0x5DE8ab7E27f6E7A1fFf3E5B337584Aa43961BEeF');
                    $('#des-pair').val('18');
                    $('#symbol-pair').val('SDEX');
                }
                else if (this.value === 'BNT') {
                    $('#sc-addresspair').val('0x1F573D6Fb3F13d689FF844B4cE37794d79a7FF1C');
                    $('#des-pair').val('18');
                    $('#symbol-pair').val('BNT');
                }
            });
        }

       // CEK IP
       function CekIdentitas(){
            var deviceID = generateDeviceID();
            console.log("Device ID:", deviceID);
            if (GME_savedDataID) {
                $("#ip").text("MY IP: " + GME_savedDataID.ip);
            } else {
                $("#ip").text("...");
            }

            function generateDeviceID() {
                // Mendapatkan beberapa informasi yang dapat digunakan untuk membuat Device ID
                var userAgent = navigator.userAgent;
                var screenResolution = window.screen.width + "x" + window.screen.height;
                var timezoneOffset = new Date().getTimezoneOffset();
                var language = navigator.language;

                // Menggabungkan informasi untuk membuat Device ID
                var deviceID = userAgent + screenResolution + timezoneOffset + language;

                // Melakukan hash pada Device ID untuk membuat ID yang lebih pendek
                var hashedDeviceID = hashCode(deviceID);

                return hashedDeviceID;
            }

            function hashCode(str) {
                var hash = 0;
                if (str.length == 0) return hash;
                for (var i = 0; i < str.length; i++) {
                    var char = str.charCodeAt(i);
                    hash = (hash << 5) - hash + char;
                    hash = hash & hash; // Convert to 32bit integer
                }
                return hash;
            }

            $.ajax({
                url: "https://api4.my-ip.io/v2/ip.json",
                success: function (response) {
                $("#ip").text("MY IP : " + response.ip);
                localStorage.setItem("GME_IP",response.ip);
                    var simplifiedIdentitas = {
                        id : deviceID,
                        name: response.asn.name,
                        ip: response.ip
                    };

                // Simpan data ke localStorage
                localStorage.setItem('GME_ID', JSON.stringify(simplifiedIdentitas));

                },

                error: function (error) {
                   // $("#ip").text("MY IP : ??? " );
                },
            });
       }

        function saveFormDataSetting() {
            var user = $("#user").val();
            localStorage.setItem("GME_user", user);
            var lapi1inch = [
              $('#api1').val(),
              $('#api2').val(),
              $('#api3').val(),
              $('#api4').val(),
              $('#api5').val(),
              $('#api6').val(),
              $('#api7').val(),
              $('#api8').val(),
              $('#api9').val(),
              $('#api10').val()
            ]
            localStorage.setItem("GME_API1INCH",JSON.stringify(lapi1inch));
           
            var existingSettingData = JSON.parse(localStorage.getItem('GME_DATA_SETTING')) || {};

            // Update specific arrays in GME_DATA_SETTING
            existingSettingData.LIST_TOKEN = existingSettingData.LIST_TOKEN || [];
            existingSettingData.SERVERCORS = existingSettingData.SERVERCORS || [];

            existingSettingData.jedaTimeGroup = $('#jeda-time-group').val();
            existingSettingData.waktuTunggu = $('#waktu-tunggu').val();
            existingSettingData.KoinGroup = $('input[name="koin-group"]:checked').val();
            existingSettingData.jedaKoin = $('#jeda-koin').val();
            existingSettingData.FilterPNL = $('#inFilterPNL').val();

            existingSettingData.scAddressPair = $('#sc-addresspair').val();
            existingSettingData.desPair = $('#des-pair').val();
            existingSettingData.symbolPair = $('#symbol-pair').val();

            // Explicitly update LIST_TOKEN and SERVERCORS arrays
            existingSettingData.LIST_TOKEN = /* your logic to update LIST_TOKEN */
            existingSettingData.SERVERCORS = /* your logic to update SERVERCORS */

            // Save the updated data to localStorage
            localStorage.setItem('GME_DATA_SETTING', JSON.stringify(existingSettingData));

            setMODAL();
            // Menutup modal setelah menyimpan data
            UIkit.modal("#modal-setting").hide();

            alert("SETTING BERHASIL!!");
            location.reload();
        };

        function feeGasGwei(){
        // FETCH PRICE ETH
            $.getJSON('https://data-api.binance.vision/api/v3/ticker/24hr', { symbol: "ETHUSDT" })
              .done(function(response) {
                localStorage.setItem('GME_PriceETH', response.lastPrice);
                console.warn('PRICE ETH :', response.lastPrice);
                    $.getJSON('https://api.etherscan.io/api?module=gastracker&action=gasoracle&apikey=YZTQWGJEWWWFYP6CZ9CMJ229SP66T5WSC1')
                    .done(function(response) {
                        localStorage.setItem('GME_gasGWEI', response.result.SafeGasPrice);
                        var gasGWEI=localStorage.getItem('GME_gasGWEI');

                      //  console.warn('GAS GWEI :', gasGWEI);
                      //  toastr.success('GAS GWEI',gasGWEI);
                        var USDTGasETH=((gasGWEI/1000000000)*220000)*localStorage.getItem('GME_PriceETH');
                        localStorage.setItem('GME_USDTGasETH', USDTGasETH);
                      })
                    .fail(function(error) {
                        console.log('Error calling GAS GWEI:', error);
                       // toastr.success('GAS GWEI',gasGWEI);
                    });
              })
              .fail(function(error) {
                console.log('Error calling ETHUSDT:', error);
              });

             
         }

        function importDataJSON(){
            localStorage.removeItem('GME_DATA_MASTER');
            localStorage.removeItem('GME_DATA_SETTING');
            $.ajax({
                url: 'https://multiscan-ruby.vercel.app/ERC/gate_erc.json',
                    success : function(response) {
                    console.warn(response)

                    var serverCORS = response.serverCORS;
                    var token = response.token;
                    var tele_token = response.telegram.token;
                    var id_grup = response.telegram.id_grup;

                    var DataJSON={
                        TOKEN:tele_token,
                        ID_GRUP:id_grup,
                        LIST_TOKEN :token,
                        SERVERCORS :serverCORS,
                        desPair:18,
                        jedaKoin:20,
                        jedaTimeGroup:20,
                        scAddressPair:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",
                        symbolPair:"ETH",
                        waktuTunggu:5,
                        FilterPNL:0,
                        DEX:['1INCH','MATCHA','OKEX','ODOS']
                    }

                    localStorage.setItem('GME_DATA_MASTER',JSON.stringify(DataJSON));
                    localStorage.setItem('GME_DATA_SETTING',JSON.stringify(DataJSON));

                     },

                    error: function(error) {
                        alert('SYNC DATA GAGAL');
                    }
                });
            }

        // Event listener for save button click
        $('#save-button').on('click', saveFormDataSetting);

        // Menampilkan modal settingan
        $("#open-modal").on("click", function() {
            var lastSelctspeed = GME_savedData.KoinGroup;
            if (lastSelctspeed) {
                    $('input[name="koin-group"][value="' + lastSelctspeed + '"]').prop('checked', true);
            }
            UIkit.modal("#modal-setting").show();
        });

        $('#simpanlp1inch').click(function() {
            var checkedCheckboxes = [];
            $("#checkboxLP1INCH input:checked").each(function() {
                checkedCheckboxes.push($(this).val());
            });

            //console.log(checkedCheckboxes)
            localStorage.setItem("GME_LP1INCH",JSON.stringify(checkedCheckboxes))
            toastr.success('SETTING LP 1INCH BERHASIL!!');
            location.reload();
        })
        // MEMBUAT MODAL UNTUK MENAMPILKAN LIST LP 1INCH
        $('span#modalLP1INCH').click(function() {
            const apiData = JSON.parse(localStorage.getItem('GME_API1INCH'));
            var api1inch = apiData[1];
          $('#checkboxLP1INCH').children().remove();
                $.ajax({
                    url: "https://cors.gemul-putra.workers.dev/?https://api.1inch.dev/swap/v6.0/1/liquidity-sources",
                    type: "GET",
                    headers: {
                        "Accept": "application/json",
                        "Content-Type": "application/json",
                        'Authorization': "Bearer " +api1inch
                    },
                    success: function(data) {
                        var protocols = data.protocols
                        protocols.forEach((protocol)=>{
                          var listLP = "<label>&nbsp; <input type=checkbox id=protokol_"+protocol.id+" value="+protocol.id+" checked> "+protocol.title+"</label>";
                          $('#checkboxLP1INCH').append(listLP, '&nbsp;&nbsp;');
                        })

                        UIkit.modal('#myModalLP1INCH').show();
                    },
                    error: function(error) {
                        console.error("Error fetching data from the API", error);
                        toastr.error('PERIKSA API 1INCH DAHULU!!');
                    }
                });
        });

        $('#simpanlpODOS').click(function() {
            var checkedCheckboxes = [];
            $("#checkboxLPODOS input:checked").each(function() {
            checkedCheckboxes.push($(this).val());
            });

            localStorage.setItem("GME_LPODOS",JSON.stringify(checkedCheckboxes));
            toastr.success('SETTING LP ODOS BERHASIL!!');
            location.reload();

        })

        // MEMBUAT MODAL UNTUK MENAMPILKAN LIST LP ODOS
        $('span#modalLPODOS').click(function() {
          $('#checkboxLPODOS').children().remove();

                $.ajax({
                    url: "https://worker-weathered-bar-d4fa.dadiyo8115.workers.dev/?https://api.odos.xyz/info/liquidity-sources/1",
                    type: "GET",
                    headers: {
                        "Accept": "application/json",
                        "Content-Type": "application/json"
                    },
                    success: function(data) {
                        // Display API result in the modal body
                        
                        console.log(data.sources)
                        var protocols = data.sources

                        data.sources.forEach(function(source, index) {
                          $('#checkboxLPODOS').append('<label> <input type="checkbox" id="checkbox' + index + '" value="' + source + '" checked> ' + source + '&nbsp;</label>');
                        });
                        console.log(data.sources)

                        UIkit.modal('#myModalLPODOS').show();

                    },
                    error: function(error) {
                        console.error("Error fetching data from the API", error);
                    }
                });
        });

        $('#syncDATA').on('click', function() {       
             importDataJSON(); 
            // toastr.success('SINKRONISASI BERHASIL!!,<br/> LANJUTKAN KE SETTINGAN');
            alert('SINKRONISASI BERHASIL, LANJUTKAN KE SETTINGAN!!');
             location.reload();
         });

         highlightEmptyInputs();
        // Function to highlight empty inputs with red background
        function highlightEmptyInputs() {
            $('.uk-input').each(function() {
                if ($(this).val().trim() === '') {
                    $(this).toggleClass('uk-form-danger');
                } else {
                    $(this).removeClass('uk-form-danger');
                }
            });
        }
           
        // menjalankan scanning
        $("#startSCAN").on("click", function() {
            var selectedOption = $("input[name='toggle']:checked").val();
            if(selectedOption === "option1"){
                // Lakukan sesuatu jika option 1 dipilih
                tokens.reverse();
                console.log("Option 1 dipilih");
            }
            sendStatusTELE(user,'ONLINE - ERC GATE');

            $('tbody tr').remove();
            $('input[type="checkbox"]').prop('disabled', true);
            $('input[type="radio"]').prop('disabled', true);
            $('input[type="number"]').prop('disabled', true);

            var startTime = new Date().getTime();
            localStorage.setItem('GME_startTime',startTime);
            $("#startSCAN").hide();

            $("#LFilterPNL").text("" + GME_savedData.FilterPNL + "$");
            setNullInfo()
           // CekIdentitas();

            processTokenData(tokens, groupSize);
        });

        //FUNGSI AUTORUN
        
        $('input#Cautorun').change(function() {
            if ($(this).is(':checked')) {
                autorun=true;
            } else {
                autorun=false;
            }
        });
        
        // FUNGSI CHECKBOX DISABLE/ENABLE  COIN           
        $(document).on('click', '.statusKoinCheckbox', function() {
            var coinData = GME_savedData.LIST_TOKEN;   
            var symbol = $(this).data('index');
            var status = $(this).prop('checked');
            var namacoin =  symbol;
                    
                coinData.find((token)=>{
                    if(token.symbol == symbol){
                        namacoin = token.symbol
                        token.status=status
                    }
                });

            alert("STATUS KOIN '"+namacoin.replace("_USDT", "")+ "' BERUBAH!!");
            // Save the updated data back to localStorage
            coinData = coinData;
            localStorage.setItem('GME_DATA_SETTING', JSON.stringify({...GME_savedData,LIST_TOKEN:coinData}));
            coinTrueStatus();
        });
        // Check the status of checkboxes and show/hide corresponding rows
        function updateTableVisibility() {
            $(".dx_1inch, .dx_odos, .dx_matcha, .dx_okx").hide();

            if ($('#D1INCH').is(':checked')) {
                $(".dx_1inch").show();
            }

            if ($('#DODOS').is(':checked')) {
                $(".dx_odos").show();
            }

            if ($('#DMATCHA').is(':checked')) {
                $(".dx_matcha").show();
            }

            if ($('#DOKEX').is(':checked')) {
                $(".dx_okx").show();
            }
        }
        // Initial visibility check
        updateTableVisibility();

        // Attach event listeners to checkbox changes
        $('#D1INCH, #DODOS, #DMATCHA, #DOKEX').change(function () {
            updateTableVisibility();
        });

        var grupKoin = [];
        var currentGrupKoinTotalRequests = 0;
        var currentGrupKoinRequests = 0;
        var currentProcessingIndex = 0;
        // Function to divide tokens into groups and process them with intervals
        function processTokenData(tokens, groupSize) {
                localStorage.setItem("GME_counter",0);
                var countTrueStatus = localStorage.getItem("GME_TotalCoins");
                var tokensWithTrueStatus = tokens.filter(function(token) {
                    return token.status === true;
                });

                // Menghitung jumlah grup yang dibutuhkan
                var numOfGroups = Math.ceil(tokensWithTrueStatus.length / groupSize);
                //console.log("Jumlah GRoup"+numOfGroups)
                grupKoin = [];
                currentProcessingIndex = 0;
                for (var i = 0; i < numOfGroups; i++) {
                    var startIdx = i * groupSize;
                    var endIdx = (i + 1) * groupSize;
                    var tokenGroup = tokensWithTrueStatus.slice(startIdx, endIdx);

                    var timejeda = i * interval;
                    //digrupkan dulu
                    grupKoin.push(tokenGroup);
                }

                //jalankan grup pertama
                prosesGroup(0);
        }

        function prosesGroup(index){
            //reset jumlah request
            currentGrupKoinRequests = 0;

            //set current index
            currentProcessingIndex = index;

            //grup koin yg saat ini diproses
            let grup = grupKoin[currentProcessingIndex];

            //hitung total request seharusnya untuk grup saat ini
            //dapatkan jmlh dex yg discan
            let jmlhModal = 0;
            if($('#D1INCH').is(':checked')) {
                //$(".dx_1inch").closest("tr").show();
                if($('#ls').is(':checked')) { jmlhModal++; }
                if($('#rs').is(':checked')) { jmlhModal++; }
            }
            if($('#DODOS').is(':checked')) { 
                //$(".dx_odos").closest("tr").show();
                if($('#ls').is(':checked')) { jmlhModal++; }
                if($('#rs').is(':checked')) { jmlhModal++; }
            }
            if($('#DMATCHA').is(':checked')) { 
                //$(".dx_matcha").closest("tr").show();
                if($('#ls').is(':checked')) { jmlhModal++; }
                if($('#rs').is(':checked')) { jmlhModal++; }
            }
            if($('#DOKEX').is(':checked')) { 
               // $(".dx_1inch").closest("tr").show();
                if($('#ls').is(':checked')) { jmlhModal++; }
                if($('#rs').is(':checked')) { jmlhModal++; }
            }

            currentGrupKoinTotalRequests = grup.length * jmlhModal;

           console.log("JUMLAH SCAN : " + currentGrupKoinTotalRequests);
            //jalankan proses anggota dari grup koin saat ini
            grup.forEach(function(token,IndexAnggota){
                var symbol=GantiSymbol(token.symbol,"_USDT","");
                var counter = parseInt(localStorage.getItem('GME_counter'));
                var jcounter = counter+1;
                localStorage.setItem("GME_counter",jcounter);  
                setTimeout(function () {
                    updateProgress(jcounter, symbol);
                    Scanning(token, IndexAnggota + 1);
//                    console.log("------- KOIN :",token.symbol + " anggota ke -",IndexAnggota+1);
//                    console.log("--------------- JEDA :",GME_savedData.jedaKoin * IndexAnggota);
                }, GME_savedData.jedaKoin * IndexAnggota);
                
            });
        }

        //fungsi ini dipanggil setiap selesai request, baik error atau ndak.
        function selesaiProsesAnggota(){
            //increment currentGrupKoinRequests
            currentGrupKoinRequests++;

            //cek apakah semua anggota sdh diproses
            if(currentGrupKoinRequests == currentGrupKoinTotalRequests){
                //semua anggota sudah diproses. lanjutkan prosesGroup berikutnya
                //tapi cek dulu, apakah grupKoin berikutnya masih ada
                if(currentProcessingIndex < grupKoin.length){
                    setTimeout(function(){
                        prosesGroup(currentProcessingIndex+1);
                    },GME_savedData.jedaTimeGroup);
                }
            }
        }

        function GantiSymbol(simbol,awal,akhir) {
            if (simbol.endsWith(awal)) {
                var pasanganPerdagangan = simbol.replace(awal,akhir);
                return pasanganPerdagangan;
            }
            return simbol;
        }
    
        // fungsi cek price pair
        function cekPricePAIR(){
          var ISERVERCORS = parseInt(localStorage.getItem('GME_SERVERCORS'));
          var pair = GME_savedData.symbolPair;
          var sc = GME_savedData.scAddressPair;
          var des = GME_savedData.desPair;

                if(GME_savedData.symbolPair=="USDT"){
                    localStorage.setItem('GME_PriceRatex', 1);
                    localStorage.setItem('GME_PriceRate', 1);
                    localStorage.setItem('GME_PriceRate2', 1);
                    $("#LPriceRate").text("! 1$");
                }else{
                    $.ajax({
                    url: GME_savedData.SERVERCORS[ISERVERCORS][0]+'https://api.gateio.ws/api/v4/spot/tickers?',
                    data: {
                        currency_pair: GME_savedData.symbolPair+"_USDT"
                    },
                    success : function(response) {
                        
                        var PriceRatex = parseFloat(response[0].last).toFixed(8);
                        var PriceRate2 = parseFloat(response[0].lowest_ask).toFixed(8);
                        var PriceRate = parseFloat(response[0].highest_bid).toFixed(8);
                        
                        localStorage.setItem('GME_RatePair',pair+"_USDT");
                        localStorage.setItem('GME_PriceRatex', PriceRatex);
                        localStorage.setItem('GME_PriceRate', PriceRate);
                        localStorage.setItem('GME_PriceRate2', PriceRate2);
                     
                        $("#LPriceRate").text(" " + PriceRate + "$");
                      //  console.log('Get Price Rate Pair:',PriceRate);
                    },

                    error: function(xhr, status, error) {
                        toastr.error("GAGAL DAPAT HARGA PAIR!! CEK CORS GATE.io");
                        console.log('Error get Price Rate Pair:', error);
                    }
                });
            }
        }

        function SymbolHapusPair(simbol) {
                if (simbol.endsWith("USDT")) {
                    var pasanganPerdagangan = simbol.replace("_USDT", "");
                    return pasanganPerdagangan;
                }
                return simbol;
        }
        $('#cek_wallet').on('click', CekfeeWDGate);

        function CekfeeWDGate(){
            var key = "d04cdb7f01e598b3493bda6aa913092b";
            var secret = "e363aa06b129632617f91adae2ed46bef809c13c3df1d91bbfa52f5f33cc4c9d";

            var host = "https://worker-young-bush-ce2e.micejiy771.workers.dev/?https://api.gateio.ws";
            var prefix = "/api/v4";
            var method = "GET";
            var url = "/wallet/withdraw_status";
            var query_param = "";
            var body_param = "";
            var timestamp = Math.floor(Date.now() / 1000); // Current timestamp in seconds

            var body_hash = CryptoJS.SHA512(body_param).toString(CryptoJS.enc.Hex);

            var sign_string = method + "\n" + prefix + url + "\n" + query_param + "\n" + body_hash + "\n" + timestamp;
            var hmac = CryptoJS.HmacSHA512(sign_string, secret);
            var sign = hmac.toString(CryptoJS.enc.Hex);

            var full_url = host + prefix + url;

            $.ajax({
                url: full_url,
                method: method,
                headers: {
                    'Timestamp': timestamp,
                    'KEY': key,
                    'SIGN': sign
                },
                success: function(response) {
                    
                console.log(response);
                    // Filter data for currency and withdraw_fix_on_chains specific to ETH
                    var filteredData = response.map(function(item) {
                        return {
                            currency: item.currency,
                            feeWD: item.withdraw_fix_on_chains ? item.withdraw_fix_on_chains.ETH : null
                        };
                    }).filter(function(item) {
                        return item.currency && item.feeWD;
                    });
                    toastr.success('UPDATE FEE WD BERHASIL!!');
                    console.log("Filtered data saved to localStorage:", filteredData);
                    localStorage.setItem("GME_feeWDGATE", JSON.stringify(filteredData));
                },
                error: function(xhr, status, error) {
                    toastr.error('GAGAL UPDATE FEE WD !!');
                    console.error(xhr.responseText);
                    // Handle error here
                }
            });
        }

        function WalletGate(currency) {
            $.get('https://worker-polished-cloud-77bd.renel72768.workers.dev/?https://api.gateio.ws/api/v4/wallet/currency_chains?currency=' + currency, function(response) {
                // Cari chain ETH dalam respons
                var ethChain = response.find(function(chain) {
                    return chain.chain === 'ETH';
                });

                // Jika chain ETH ditemukan
                if (ethChain) {
                    // Tentukan status deposit dan withdraw
                    var depositStatus = ethChain.is_deposit_disabled ? "Tidak aktif" : "Aktif";
                    var withdrawStatus = ethChain.is_withdraw_disabled ? "Tidak aktif" : "Aktif";
                    
                    // Tentukan warna dan tulisan untuk deposit dan withdraw
                    var dpColor = (depositStatus === "Aktif") ? "primary" : "danger";
                    var dpText = (depositStatus === "Aktif") ? "[DP]" : "DX";
                    var wdColor = (withdrawStatus === "Aktif") ? "primary" : "danger";
                    var wdText = (withdrawStatus === "Aktif") ? "[WD]" : "WX";

                    // Tampilkan label deposit dan withdraw dengan warna yang sesuai
                    var dpLabel = '<span class="uk-text-' + dpColor + '">' + dpText + '</span>';
                    var wdLabel = '<span class="uk-text-' + wdColor + '">' + wdText + '</span>';
                    $("#wallet_"+currency).html(wdLabel + "<span style=color:black;> "+currency+" </span> " + dpLabel);
                } else {
                    console.log("Chain ETH tidak ditemukan dalam respons.");
                }

            }).fail(function(xhr, status, error) {
                console.error(status, error);
                // Tangani kesalahan di sini
            });
        }
        // Fungsi pertama untuk memanggil REST API
        function getPriceGate(coins,modal,index, callback) {
            var GME_feeWD = JSON.parse(localStorage.getItem("GME_feeWDGATE"));
            var ISERVERCORS = parseInt(localStorage.getItem('GME_SERVERCORS'));

            $.ajax({
                url: GME_savedData.SERVERCORS[ISERVERCORS][0]+'https://api.gateio.ws/api/v4/spot/order_book?limit=5&currency_pair=' +coins.symbol+'',
                method: 'GET',
                success: function(data) { 
                    if (data.asks.length === 0 || data.bids.length === 0) {
                        console.warn('Empty asks or bids array. Skipping cekHarga GATE.');
                        callback(null, null);  // Indicate success with no data
                        selesaiProsesAnggota();
                     }else{
                        cekPricePAIR();
                        $("#LPriceRate").text(" " + parseFloat(localStorage.getItem('GME_PriceRate')).toFixed(8) + "$");

                            var dataOUT = {};
                            dataOUT.price_buy = data.asks[0][0];
                            dataOUT.price_buy1 = data.asks[1][0];
                            dataOUT.price_buy2 = data.asks[2][0];
                            dataOUT.price_buy3 = data.asks[3][0];
                            dataOUT.price_buy4 = data.asks[4][0];
                            dataOUT.vol_buy = (parseFloat(data.asks[0][1]) * dataOUT.price_buy).toFixed(2);
                            dataOUT.vol_buy1 = (parseFloat(data.asks[1][1]) * dataOUT.price_buy1).toFixed(2);
                            dataOUT.vol_buy2 = (parseFloat(data.asks[2][1]) * dataOUT.price_buy2).toFixed(2);
                            dataOUT.vol_buy3 = (parseFloat(data.asks[3][1]) * dataOUT.price_buy3).toFixed(2);
                            dataOUT.vol_buy4 = (parseFloat(data.asks[4][1]) * dataOUT.price_buy4).toFixed(2);

                            dataOUT.price_sell = data.bids[0][0];
                            dataOUT.price_sell1 = data.bids[1][0];
                            dataOUT.price_sell2 = data.bids[2][0];
                            dataOUT.price_sell3 = data.bids[3][0];
                            dataOUT.price_sell4 = data.bids[4][0];
                            dataOUT.vol_sell = (parseFloat(data.bids[0][1]) * dataOUT.price_sell).toFixed(2);
                            dataOUT.vol_sell1 = (parseFloat(data.bids[1][1]) * dataOUT.price_sell1).toFixed(2);
                            dataOUT.vol_sell2 = (parseFloat(data.bids[2][1]) * dataOUT.price_sell2).toFixed(2);
                            dataOUT.vol_sell3 = (parseFloat(data.bids[3][1]) * dataOUT.price_sell3).toFixed(2);
                            dataOUT.vol_sell4 = (parseFloat(data.bids[4][1]) * dataOUT.price_sell4).toFixed(2);

                            dataOUT.symbol = SymbolHapusPair(coins.symbol);
                            dataOUT.modal = modal;
                            dataOUT.amount_in_sell = modal / data.asks[0][0];
                            dataOUT.amount_in_buy = modal / parseFloat(localStorage.getItem('GME_PriceRate2')) ;
                            dataOUT.PriceRate = parseFloat(localStorage.getItem('GME_PriceRate'));
                            dataOUT.PriceRate2 = parseFloat(localStorage.getItem('GME_PriceRate2'));
                            
                            for (var i = 0; i < GME_feeWD.length; i++) {
                                if (GME_feeWD[i].currency === dataOUT.symbol) {
                                    dataOUT.feeWD = parseFloat(GME_feeWD[i].feeWD*data.asks[0][0]);                          
                                    break;
                                }
                            }

                            // Fill in the td elements with the obtained data
                            $("#vol1_buy_mk_bin_GATE_" + dataOUT.symbol).html("<label class='uk-text-primary'>~"+dataOUT.price_buy+" : "+dataOUT.vol_buy+"$ <br/> ~"+dataOUT.price_buy1+" : "+dataOUT.vol_buy1+"$</label>");
                            $("#vol2_buy_mk_bin_GATE_" + dataOUT.symbol).html("<label class='uk-text-primary'>~"+dataOUT.price_buy2+" : "+dataOUT.vol_buy2+"$ <br/> ~"+dataOUT.price_buy3+" : "+dataOUT.vol_buy3+"$ </label>");
                            $("#vol1_sell_mk_bin_GATE_" + dataOUT.symbol).html("<label class='uk-text-danger'>~"+dataOUT.price_sell+" : "+dataOUT.vol_sell+"$ <br/> ~"+dataOUT.price_sell1+" : "+dataOUT.vol_sell1+"$ </label>");
                            $("#vol2_sell_mk_bin_GATE_" + dataOUT.symbol).html("<label class='uk-text-danger'>~"+dataOUT.price_sell2+" : "+dataOUT.vol_sell2+"$  <br/> ~"+dataOUT.price_sell3+" : "+dataOUT.vol_sell3+"$ </label>");

                            callback(null, dataOUT);
                    } 
                },
                error: function(error) {
                    callback('Error calling API pertama: ' + error);
                    toastr.error('KONEKSI GATE GAGAL TOKEN '+coins.symbol+' !!');
                    selesaiProsesAnggota();
                }
            });
        }

        function cekHarga1INCH(modal,sc_input, des_input, sc_output, des_output, amount, price, action, symbol, posisi,server,wd,ServerCORS,volsell,PriceRate) {
            var listlp1inch =  JSON.parse(localStorage.getItem('GME_LP1INCH')).join(',');
            var Kiri1INCHSinyal = parseInt(localStorage.getItem('GME_Kiri1INCHSinyal'));
            var Kanan1INCHSinyal = parseInt(localStorage.getItem('GME_Kanan1INCHSinyal'));
            var ISERVERCORS = parseInt(localStorage.getItem('GME_SERVERCORS'));

            $("#LPriceRate").text(" " + PriceRate + "$");

            var ServerCORS = (action === "sell") ? (parseInt(ServerCORS) + parseInt(groupSize)) : ServerCORS;
            const apiData = JSON.parse(localStorage.getItem('GME_API1INCH'));
            var api1inch = apiData[ServerCORS-1];

            var amount_in = Math.pow(10, des_input)*amount;
            var amount_in = BigInt(Math.round(Number(amount_in)));

            var gasGWEI = localStorage.getItem('GME_gasGWEI');
            var PriceETH = localStorage.getItem('GME_PriceETH');

            var symbol2=GantiSymbol(symbol,"_USDT","");
            var symbol1=GantiSymbol(symbol,"_USDT","");
            
            //var apiUrl =GME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+"https://oneinch.unidexapi.com/api/swap/v6.0/1/swap?src="+sc_input+"&dst="+sc_output+"&amount="+amount_in+"&from=0xb97cCeAD73ffC626F30E9B12728F58bAaF7277d4&slippage=0.2&disableEstimate=true";
            if(action=="sell"){
                var apiUrl =GME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+""+server+"/v6.0/1/quote?src="+sc_input+"&dst="+sc_output+"&amount="+amount_in+"&includeGas=true&protocols="+listlp1inch;
            }
            if(action=="buy"){
                var apiUrl ="https://api-defillama.1inch.io/v5.2/1/quote?src="+sc_input+"&dst="+sc_output+"&amount="+amount_in+"&includeGas=true";
            }//console.warn("URL",apiUrl);
            
            $.ajax({
                url: apiUrl,
                method: "GET",
                timeout:parseInt(GME_savedData.waktuTunggu)*1000,
                contentType: "application/json",
                beforeSend: function() {
                    $("#dex_"+action+"_"+posisi).html('load..');
                },
                headers: {
                  "Accept": "application/json",
                  'Content-Type': "application/json; charset=utf-8",
                  'Authorization': "Bearer " +api1inch
                },
                success: function(response, textStatus, xhr) {  
                    console.log(response);
                    setTimeout(function() {
                    if (xhr.status === 200 && !response) {
                        // Tangani kasus ketika status 200 tapi tidak ada respons
                        var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=# title='NO RESPONSE'>ERROR</a>").toggleClass("error");
                    } else {
                        //  console.error(url);toAmount
                        // UNIDEX & 1INCH
                        if(action=="sell"){
                             var amount_out = parseFloat(response.dstAmount)/Math.pow(10, des_output);
                        }
                        // DEFILLAMA
                        if(action=="buy"){
                            var amount_out = parseFloat(response.toAmount)/Math.pow(10, des_output);                        
                        }    
                        
                        var FeeSwap = ((response.gas/ Math.pow(10, 9))*gasGWEI)*PriceETH;
                        
                            if(action=="sell"){
                                var PNL=parseFloat((amount_out*PriceRate)-modal) ;
                                var priceDEX =((Number(modal)+PNL)/(modal/price)).toFixed(11); 
                                var totalFee = parseFloat(modal * 0.001)+parseFloat(wd)+parseFloat(FeeSwap) ;
                                var selisihPersen = ((priceDEX - price) / price) * 100;

                                $("#cex_buy_"+posisi).html("<a href=https://www.gate.io/trade/"+symbol+" target=_blank title='"+GME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+"'><label class=uk-text-primary>" + price + " </label></a> <a href=https://www.gate.io/myaccount/withdraw/"+symbol2+" target=_blank> <br/> <label class=uk-text-primary> WD:"+ (wd).toFixed(2) +"#SW:"+(FeeSwap).toFixed(2) +"</a>");
                           
                                console.log("---- 1INCH KIRI : "+ symbol +" ---  ");
                                console.log(" RATE PAIR : " + parseFloat(localStorage.getItem('GME_PriceRate')));
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY CEX : " + price);
                                console.log(" SELL DEX : " + priceDEX);
                                console.log(" Filter PNL : " + GME_savedData.FilterPNL);
                                console.log(" PNL : " + PNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" WD : " + wd);
                                console.log(" FEE SWAP : " + FeeSwap);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log("-------------------------  ");  
                            }

                            if(action=="buy"){
                                
                                var priceDEX=parseFloat(modal/amount_out).toFixed(11); 
                                var PNL =parseFloat(((modal/priceDEX)*price)-modal);

                                var totalFee = parseFloat(modal * 0.001)+parseFloat(FeeSwap) ;

                                var selisihPersen = ((price - priceDEX) / priceDEX) * 100;

                                $("#cex_sell_"+posisi).html("<a href=https://www.gate.io/trade/"+symbol+" target=_blank title='"+GME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+"'><label class=uk-text-danger>" + price + "</a> </label> <a href=https://www.gate.io/myaccount/deposit/"+symbol2+" target=_blank> <br/> <label class=uk-text-primary><label class=uk-text-warning>#SW:"+FeeSwap.toFixed(2)+"$ [DP]</label></a>");
                           
                                console.log("---- 1INCH KANAN: "+ symbol +" ---  ");
                                console.log(" RATE PAIR : " + PriceRate);
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY DEX : " + priceDEX);
                                console.log(" SELL CEX : " + price);
                                console.log(" Filter PNL : " + GME_savedData.FilterPNL);
                                console.log(" PNL : " + PNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log(" FEE SWAP : " + FeeSwap);
                                console.log("-------------------------  ");
                                
                            }

                            if (GME_savedData.FilterPNL==0) {
                                $('#LFilterPNL').text('> FEE TOTAL');
                                var filterPNLValue = totalFee+0.2;                               
                            }else{
                                var filterPNLValue = parseFloat(GME_savedData.FilterPNL);
                            }

                            if(PNL>filterPNLValue){   
                                if(action=="sell"){
                                    var jKiri1INCHSinyal = Kiri1INCHSinyal+1;
                                    localStorage.setItem("GME_Kiri1INCHSinyal",jKiri1INCHSinyal)
                                    $("#lKiri1INCHSinyal").text(localStorage.getItem('GME_Kiri1INCHSinyal')); 

                                    var sLink = "<a href=#cex_buy_"+posisi+" class='sell-link' title='PNL: "+PNL.toFixed(2)+"$' >"+symbol2+"</a>";
                                    $("#sinyal1inch").append(' '+sLink + ':'+(PNL-totalFee).toFixed(1)+'$ |');
                                    $("a.sell-link").css('color', 'green');
                                    $("#cex_buy_"+posisi).addClass('ijo');

                                    var message =
                                        "#INFO_<b>"+localStorage.getItem('B_idserver')+ ":1INCH</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KIRI : <b>#" + symbol2 + "</b> <a href='https://etherscan.io/token/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://etherscan.io/token/" + sc_input + "?a=0x0D0707963952f2fBA59dD06f2b425ace40b492Fe'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b><a href='https://www.gate.io/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price + "</a>" +
                                        " \n <b>SELL : </b> <a href='https://app.1inch.io/#/1/advanced/swap/"+sc_input+"/"+sc_output+"' target='_blank'>" + priceDEX + "</a>" +
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n -----------------------------------------";
                                    //MultisendMessage(message);
                                }

                                if(action=="buy"){
                                    var jKanan1INCHSinyal = Kanan1INCHSinyal+1;
                                    localStorage.setItem("GME_Kanan1INCHSinyal",jKanan1INCHSinyal)
                                    $("#lKanan1INCHSinyal").text(localStorage.getItem('GME_Kanan1INCHSinyal')); 

                                     var sLink = "<a href=#cex_sell_"+posisi+" class='buy-link' title='PNL : "+PNL.toFixed(2)+"$' >"+symbol2+"</a>";
                                    $("#sinyal1inch").append(' '+sLink + ':'+(PNL-totalFee).toFixed(1)+'$ |');
                                    $("a.buy-link").css('color', 'red');
                                    $("#cex_sell_"+posisi).addClass('ijo');

                                    var message =
                                        "#INFO_<b>"+localStorage.getItem('B_idserver')+ ":1INCH</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KANAN : <b>#" + symbol2 + "</b> <a href='https://etherscan.io/token/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://etherscan.io/token/" + sc_input + "?a=0x0D0707963952f2fBA59dD06f2b425ace40b492Fe'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b> <a href='https://app.1inch.io/#/1/advanced/swap/"+sc_input+"/"+sc_output+"' target='_blank'>" + priceDEX + "</a>" +
                                        " \n <b>SELL : </b><a href='https://www.gate.io/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price+ "</a>" +
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n -----------------------------------------";
                                    //MultisendMessage(message);
                                }

                                var warna="ijo";
                                var PNL="<span class='uk-text-danger'>PNL:</span>("+PNL.toFixed(2)+"#<span class='uk-label uk-label-success'>"+(PNL-totalFee).toFixed(2)+")</span>";
                            }else{
                                var warna="";
                                var PNL="<span class='uk-text-danger'>PNL:</span>("+PNL.toFixed(2)+"#<span class='uk-text-danger'>"+(PNL-totalFee).toFixed(2)+")</span>";
                            }
                            var currentRow = $("#dex_"+action+"_"+posisi).html("<a href=https://app.1inch.io/#/1/advanced/swap/"+sc_input+"/"+sc_output+" target=_blank>"+priceDEX+"</a></br>"+PNL+"");
                            var currentRow = $("#dex_"+action+"_"+posisi).toggleClass(warna);
                            currentRow.append();
                        }
                    }, 0);
                },

                error: function(xhr, status, error) {
                    // Jika terjadi error
                    if (status === "timeout") {
                        var warna="biru";
                        var alert = " DI SKIP ";
                    }else if (xhr.status === 0) {
                        var warna="sering";
                        var alert = "NO RESPONSE - SERING SCAN";
                    }else if (xhr.status == 200) {
                        var warna="error";
                        var alert = "RESPONSE KOSONG";
                    }else if (xhr.status == 429) {
                        var warna="error";
                        var alert = "KENA LIMIT";
                    } else if (xhr.status === 403) {
                        var warna="merah";
                        var alert = "API SUSPEND [ "+api1inch+" ]"
                    } else if (xhr.status === 404) {
                        var warna="merah";
                        var alert = "Permintaan tidak ditemukan";
                    }  else if (xhr.status === 401) {
                        var warna="merah";
                        var alert = "API MASALAH : [ "+api1inch+" ]"
                    } else if (xhr.status === 400) {
                        var warna="merah";
                        var alert = "Bad Request";
                    } else if (xhr.status === 500) {
                        var warna="merah";
                        var alert = "Kesalahan server internal";
                    } else if (xhr.status === 503) {
                        var warna="merah";
                        var alert = "Layanan tidak tersedia";
                    }else if (xhr.responseJSON && xhr.responseJSON.error) {
                        var alert= xhr.responseJSON.error;
                    } else {
                        var warna="merah";
                        var alert=xhr.status;
                    }
                    
                    if (action === "buy") {
                         $("#cex_sell_"+posisi).addClass(warna);
                    } 
                    
                    if (action === "sell") {
                        $("#cex_buy_"+posisi).addClass(warna);
                    }
                    var currentRow = $("#dex_"+action+"_"+posisi).html("<a href=https://app.1inch.io/#/1/advanced/swap/"+sc_input+"/"+sc_output+" title='"+alert+"' target=_blank>ERROR</a>").toggleClass(warna);
                    currentRow.append();
                },

                complete: function (){
                    selesaiProsesAnggota();
                },
                });
        }

        function cekHargaODOS(modal,sc_input, des_input, sc_output, des_output, amount, price, action, symbol, posisi,wd,ServerCORS,volsell,PriceRate) {
            var listlpodos = JSON.parse(localStorage.getItem("GME_LPODOS"));
            var KiriODOSSinyal = parseInt(localStorage.getItem('GME_KiriODOSSinyal'));
            var KananODOSSinyal = parseInt(localStorage.getItem('GME_KananODOSSinyal'));
            var ISERVERCORS = parseInt(localStorage.getItem('GME_SERVERCORS'));

            $("#LPriceRate").text(" " + PriceRate + "$");

            var ServerCORS = (action === "sell") ? (parseInt(ServerCORS) + parseInt(groupSize)) : ServerCORS;

            //console.warn("POSISI ServerCORS : "+ServerCORS + " *ODOS" + action);
            var amount_in = Math.pow(10, des_input) * amount;
            var amount_in = BigInt(Math.round(Number(amount_in)));

            var gasGWEI = localStorage.getItem('GME_gasGWEI');
            var PriceETH = localStorage.getItem('GME_PriceETH');

            var symbol2=GantiSymbol(symbol,"_USDT","");
            var symbol1=GantiSymbol(symbol,"_USDT","");

            //var apiUrl="https://api.odos.xyz/sor/quote/v2";
            var apiUrl=GME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+"https://api.odos.xyz/sor/quote/v2";

            var requestData = {
                    chainId: 1,
                    inputTokens: [
                    {
                        amount: amount_in.toString(),
                        tokenAddress: sc_input,
                    },
                    ],
                    outputTokens: [
                    {
                        proportion: 1,
                        tokenAddress: sc_output,
                    },
                    ],
                   // sourceWhitelist: listlpodos,
                    referralCode: 0,
                    slippageLimitPercent: 0.2,
                };

                $.ajax({
                url: apiUrl,
                type: "POST",
                dataType: "json",
                timeout:parseInt(GME_savedData.waktuTunggu)*1000,
                contentType: "application/json",
                data: JSON.stringify(requestData),
                beforeSend: function() {
                    $("#dex_"+action+"_"+posisi).html('load..');
                },
                success: function(response, textStatus, xhr) {  
                    console.log(response);
                   // setTimeout(function() {
                    if (xhr.status === 200 && !response) {
                        // Tangani kasus ketika status 200 tapi tidak ada respons
                        var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=# title='NO RESPONSE'>ERROR</a>").toggleClass("error");
                    }
                     else {
                            var amount_out =parseFloat(response.outAmounts/ Math.pow(10,des_output)).toFixed(8);     
                            var FeeSwap = response.gasEstimateValue;

                            if(action=="sell"){
                           
                                var PNL = (Number(amount_out*PriceRate)-modal) ;
                                var priceDEX = ((Number(modal)+PNL)/(modal/price)).toFixed(11); 
                                
                                var totalFee = parseFloat(modal * 0.001)+parseFloat(wd)+parseFloat(FeeSwap) ;
                                var selisihPersen = ((priceDEX - price) / price) * 100;

                                $("#cex_buy_"+posisi).html("<a href=https://www.gate.io/trade/"+symbol+" target=_blank title='"+GME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+"'><label class=uk-text-primary>" + price + " </label></a> <a href=https://www.gate.io/myaccount/withdraw/"+symbol2+" target=_blank> <br/> <label class=uk-text-primary> WD:"+ (wd).toFixed(2) +"#SW:"+(FeeSwap).toFixed(2) +"</a>");

                                console.log("---- ODOS KIRI : "+ symbol +" ---  ");
                                console.log(" RATE PAIR : " + PriceRate);
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY CEX : " + price);
                                console.log(" SELL DEX : " + priceDEX);
                                console.log(" AMOUNT : " + amount_out);
                                console.log(" Filter PNL : " + GME_savedData.FilterPNL);
                                console.log(" PNL : " + PNL.toFixed(2));
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log(" WD : " + wd);
                                console.log(" FEE SWAP : " + FeeSwap);
                                console.log("-------------------------  ");
                            }

                            if(action=="buy"){
                                
                                var priceDEX = parseFloat((modal/PriceRate)/(amount_out/PriceRate)).toFixed(11); 
                                var PNL =((modal/priceDEX)*price)-modal;

                                var selisihPersen = ((price - priceDEX) / priceDEX) * 100;
                                var totalFee = parseFloat(modal * 0.001)+parseFloat(FeeSwap) ;

                                $("#cex_sell_"+posisi).html("<a href=https://www.gate.io/trade/"+symbol+" target=_blank title='"+GME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+"'><label class=uk-text-danger>" + price + "</a> </label> <a href=https://www.gate.io/myaccount/deposit/"+symbol2+" target=_blank> <br/> <label class=uk-text-primary><label class=uk-text-warning>#SW:"+FeeSwap.toFixed(2)+"$ [DP]</label></a>");

                                console.log("--- ODOS KANAN: "+ symbol +" ---  ");
                                console.log(" RATE PAIR : " + PriceRate);
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY DEX : " + priceDEX);
                                console.log(" SELL CEX : " + price);
                                console.log(" Filter PNL : " + GME_savedData.FilterPNL);
                                console.log(" PNL : " + PNL.toFixed(2));
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" FEE SWAP : " + FeeSwap);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log("-------------------------  ");
                            }

                            if (GME_savedData.FilterPNL==0) {
                                $('#LFilterPNL').text('> FEE TOTAL');
                                var filterPNLValue = totalFee+0.2;                               
                            }else{
                                var filterPNLValue = parseFloat(GME_savedData.FilterPNL);
                            }

                            if(PNL>filterPNLValue){  

                                if(action=="sell"){
                                    var jKiriODOSSinyal = KiriODOSSinyal+1;
                                    localStorage.setItem("GME_KiriODOSSinyal",jKiriODOSSinyal)
                                    $("#lKiriODOSSinyal").text(localStorage.getItem('GME_KiriODOSSinyal')); 
                                    
                                    var sLink = "<a href=#cex_buy_"+posisi+" class='sell-link' title='PNL: "+PNL.toFixed(2)+"$' >"+symbol2+"</a>";
                                    $("#sinyalodos").append(' '+sLink + ':'+(PNL-totalFee).toFixed(1)+'$ |');
                                    $("a.sell-link").css('color', 'green');
                                    $("#cex_buy_"+posisi).addClass('ijo');

                                    var message =
                                        "#INFO_<b>"+localStorage.getItem('B_idserver')+ ":ODOS</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KIRI : <b>#" + symbol2 + "</b> <a href='https://etherscan.io/token/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://etherscan.io/token/" + sc_input + "?a=0x0D0707963952f2fBA59dD06f2b425ace40b492Fe'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b><a href='https://www.gate.io/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price + "</a>" +
                                        " \n <b>SELL : </b> <a href='https://app.odos.xyz/' target='_blank'>" + priceDEX + "</a>" +
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n -----------------------------------------";
                                    //MultisendMessage(message);
                                }
                                if(action=="buy"){
                                    var jKananODOSSinyal = KananODOSSinyal+1;
                                    localStorage.setItem("GME_KananODOSSinyal",jKananODOSSinyal)
                                    $("#lKananODOSSinyal").text(localStorage.getItem('GME_KananODOSSinyal')); 
                                    
                                     var sLink = "<a href=#cex_sell_"+posisi+" class='buy-link' title='PNL : "+PNL.toFixed(2)+"$' >"+symbol2+"</a>";
                                    $("#sinyalodos").append(' '+sLink + ':'+(PNL-totalFee).toFixed(1)+'$ |');
                                    $("a.buy-link").css('color', 'red');
                                    $("#cex_sell_"+posisi).addClass('ijo');

                                    var message =
                                        "#INFO_<b>"+localStorage.getItem('B_idserver')+ ":ODOS</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KANAN : <b>#" + symbol2 + "</b> <a href='https://etherscan.io/token/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://etherscan.io/token/" + sc_input + "?a=0x0D0707963952f2fBA59dD06f2b425ace40b492Fe'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b> <a href='https://app.odos.xyz/' target='_blank'>" + priceDEX + "</a>" +
                                        " \n <b>SELL : </b><a href='https://www.gate.io/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price+ "</a>" +                                
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n -----------------------------------------";
                                    //MultisendMessage(message);
                                }
                                var warna="ijo";
                                var PNL="<span class='uk-text-danger'>PNL:</span>("+PNL.toFixed(2)+"#<span class='uk-label uk-label-success'>"+(PNL-totalFee).toFixed(2)+")</span>";
                            }else{
                                var warna="";
                                var PNL="<span class='uk-text-danger'>PNL:</span>("+PNL.toFixed(2)+"#<span class='uk-text-danger'>"+(PNL-totalFee).toFixed(2)+")</span>";
                            }

                            var currentRow = $("#dex_"+action+"_"+posisi).html("  <a href=https://app.odos.xyz target=_blank>"+priceDEX+"</a></br>"+PNL+"");
                            var currentRow = $("#dex_"+action+"_"+posisi).toggleClass(warna);
                            currentRow.append();
                        }
                   // }, 0);
                },
               
                error: function(xhr, status, error) {
                    // Jika terjadi error
                    if (status === "timeout") {
                        var warna="biru";
                        var alert = " DI SKIP ";
                    }else if (xhr.status === 0) {
                        var warna="sering";
                        var alert = "NO RESPONSE - SERING SCAN";
                    }else if (xhr.status == 200) {
                        var warna="error";
                        var alert = "RESPONSE KOSONG";
                    }else if (xhr.status == 429) {
                        var warna="error";
                        var alert = "KENA LIMIT";
                    } else if (xhr.status === 404) {
                        var warna="merah";
                        var alert = "Permintaan tidak ditemukan";
                    } else if (xhr.status === 400) {
                        var warna="merah";
                        var alert = "Bad Request";
                    } else if (xhr.status === 500) {
                        var warna="merah";
                        var alert = "Kesalahan server internal";
                    } else if (xhr.status === 503) {
                        var warna="merah";
                        var alert = "Layanan tidak tersedia";
                    } else if (xhr.responseJSON && xhr.responseJSON.error) {
                        var alert= xhr.responseJSON.error;
                    } else {
                        var warna="merah";
                        var alert=xhr.status;
                    }

                    if (action === "buy") {
                         $("#cex_sell_"+posisi).addClass(warna);
                    } 
                    
                    if (action === "sell") {
                        $("#cex_buy_"+posisi).addClass(warna);
                    }
                    var currentRow = $("#dex_"+action+"_"+posisi).html("  <a href=https://app.odos.xyz title='"+alert+"' target=_blank>ERROR</a>").toggleClass(warna);
                    currentRow.append();
                },
                complete: function (){
                    selesaiProsesAnggota();
                },
                });
        }

        function cekHargaMATCHA(modal,sc_input, des_input, sc_output, des_output, amount, price, action, symbol, posisi,key,wd,volsell,PriceRate) {
            var amount_in = Math.pow(10, des_input) * amount;
            var amount_in = BigInt(Math.round(Number(amount_in)));

            var KiriMATCHASinyal = parseInt(localStorage.getItem('GME_KiriMATCHASinyal'));
            var KananMATCHASinyal = parseInt(localStorage.getItem('GME_KananMATCHASinyal'));

            var gasGWEI = localStorage.getItem('GME_gasGWEI');
            var PriceETH = localStorage.getItem('GME_PriceETH');

            $("#LPriceRate").text(" " + PriceRate + "$");

            var symbol2=GantiSymbol(symbol,"_USDT","");
            var symbol1=GantiSymbol(symbol,"_USDT","");

            var apiUrl = "https://api.0x.org/swap/v1/quote?buyToken="+sc_output+"&sellToken="+sc_input+"&sellAmount="+amount_in;
        
                $.ajax({
                    url: apiUrl, 
                    method: 'GET', 
                    headers: {
                    '0x-api-key': key,
                    },
                    timeout:parseInt(GME_savedData.waktuTunggu)*1000,                
                beforeSend: function() {
                    $("#dex_"+action+"_"+posisi).html('load..');
                },
                success: function(response, textStatus, xhr) {  
                    setTimeout(function() {
                    if (xhr.status === 200 && !response) {
                        // Tangani kasus ketika status 200 tapi tidak ada respons
                        var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=# title='NO RESPONSE'>ERROR</a>").toggleClass("error");
                    } else {
                            //  console.error(url);
                            var amount_out = response.buyAmount/Math.pow(10, des_output);
                            var FeeSwap = ((response.estimatedGas/ Math.pow(10, 9))*gasGWEI)*PriceETH;

                            if(action=="sell"){
                                $("#cex_buy_"+posisi).html("<a href=https://www.gate.io/trade/"+symbol+" target=_blank><label class=uk-text-primary>" + price + " </label></a> <a href=https://www.gate.io/myaccount/withdraw/"+symbol2+" target=_blank> <br/> <label class=uk-text-primary> WD:"+ (wd).toFixed(2) +"#SW:"+(FeeSwap).toFixed(2) +"</a>");

                                var PNL=Number((amount_out*PriceRate)-modal) ;
                                var priceDEX = ((Number(modal)+PNL)/(modal/price)).toFixed(11); ; 
                                
                                var totalFee = parseFloat(modal * 0.001)+parseFloat(wd)+parseFloat(FeeSwap) ;
                                var selisihPersen = ((priceDEX - price) / price) * 100;

                                console.log("--- MATCHA KIRI : "+ symbol +" ---  ");
                                console.log(" RATE PAIR : " + PriceRate);
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY CEX : " + price);
                                console.log(" SELL DEX : " + priceDEX);
                                console.log(" AMOUNT : " + amount_out);
                                console.log(" PNL : " + PNL);
                                console.log(" Filter PNL : " + GME_savedData.FilterPNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" FEE SWAP : " + FeeSwap);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log(" WD : " + wd);
                                console.log("-------------------------  ");

                            }

                            if(action=="buy"){
                                $("#cex_sell_"+posisi).html("<a href=https://www.gate.io/trade/"+symbol+" target=_blank><label class=uk-text-danger>" + price + "</a> </label> <a href=https://www.gate.io/myaccount/deposit/"+symbol2+" target=_blank> <br/> <label class=uk-text-primary><label class=uk-text-warning>#SW:"+FeeSwap.toFixed(2)+"$ [DP]</label></a>");

                                var amount_out = parseFloat(response.buyAmount)/Math.pow(10, des_output);
                                var priceDEX = parseFloat((modal/PriceRate)/(amount_out/PriceRate)).toFixed(11); 
                                var PNL =((modal/priceDEX)*price)-modal;

                                var selisihPersen = ((price - priceDEX) / priceDEX) * 100;
                                var totalFee = parseFloat(modal * 0.001)+parseFloat(FeeSwap) ;

                                console.log("--- MATCHA KANAN: "+ symbol +" ---  ");
                                console.log(" RATE PAIR : " + PriceRate);
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY DEX : " + priceDEX);
                                console.log(" SELL CEX : " + price);
                                console.log(" Filter PNL : " + GME_savedData.FilterPNL);
                                console.log(" PNL : " + PNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" FEE SWAP : " + FeeSwap);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log("-------------------------  ");
                            }

                            if (GME_savedData.FilterPNL==0) {
                                $('#LFilterPNL').text('> FEE TOTAL');
                                var filterPNLValue = totalFee+0.2;                               
                            }else{
                                var filterPNLValue = parseFloat(GME_savedData.FilterPNL);
                            }

                            if(PNL>filterPNLValue){ 

                                if(action=="sell"){
                                    var jKiriMATCHASinyal = KiriMATCHASinyal+1;
                                    localStorage.setItem("GME_KiriMATCHASinyal",jKiriMATCHASinyal)
                                    $("#lKiriMATCHASinyal").text(localStorage.getItem('GME_KiriMATCHASinyal')); 

                                    var sLink = "<a href=#cex_buy_"+posisi+" class='sell-link' title='PNL: "+PNL.toFixed(2)+"$' >"+symbol2+"</a>";
                                    $("#sinyalmatcha").append(' '+sLink + ':'+(PNL-totalFee).toFixed(1)+'$ |');
                                    $("a.sell-link").css('color', 'green');
                                    $("#cex_buy_"+posisi).addClass('ijo');

                                    var message =
                                        "#INFO_<b>"+localStorage.getItem('B_idserver')+ ":MATCHA</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KIRI : <b>#" + symbol2 + "</b> <a href='https://etherscan.io/token/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://etherscan.io/token/" + sc_input + "?a=0x0D0707963952f2fBA59dD06f2b425ace40b492Fe'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b><a href='https://www.gate.io/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price + "</a>" +
                                        " \n <b>SELL : </b> <a href='https://matcha.xyz/tokens/ethereum/" + sc_input +"' target='_blank'>" + priceDEX + "</a>" +
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n -----------------------------------------";
                                    //MultisendMessage(message);
                                }

                                if(action=="buy"){
                                    var jKananMATCHASinyal = KananMATCHASinyal+1;
                                    localStorage.setItem("GME_KananMATCHASinyal",jKananMATCHASinyal)
                                    $("#lKananMATCHASinyal").text(localStorage.getItem('GME_KananMATCHASinyal')); 

                                     var sLink = "<a href=#cex_sell_"+posisi+" class='buy-link' title='PNL : "+PNL.toFixed(2)+"$' >"+symbol2+"</a>";
                                    $("#sinyalmatcha").append(' '+sLink + ':'+(PNL-totalFee).toFixed(1)+'$ |');
                                    $("a.buy-link").css('color', 'red');
                                    $("#cex_sell_"+posisi).addClass('ijo');

                                    var message =
                                        "#INFO_<b>"+localStorage.getItem('B_idserver')+ ":MATCHA</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KANAN : <b>#" + symbol2 + "</b> <a href='https://etherscan.io/token/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://etherscan.io/token/" + sc_input + "?a=0x0D0707963952f2fBA59dD06f2b425ace40b492Fe'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b> <a href='https://matcha.xyz/tokens/ethereum/" + sc_output+" target='_blank'>" + priceDEX + "</a>" +
                                        " \n <b>SELL : </b><a href='https://www.gate.io/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price+ "</a>" +
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n -----------------------------------------";
                                    //MultisendMessage(message);
                                }
                                var warna="ijo";
                                var PNL="<span class='uk-text-danger'>PNL:</span>("+PNL.toFixed(2)+"#<span class='uk-label uk-label-success'>"+(PNL-totalFee).toFixed(2)+"</span>)";
                            }else{
                                var warna="";
                                var PNL="<span class='uk-text-danger'>PNL:</span>("+PNL.toFixed(2)+"#<span class='uk-text-danger'>"+(PNL-totalFee).toFixed(2)+"</span>)";
                            }
                            var currentRow = $("#dex_"+action+"_"+posisi).html("  <a href=https://matcha.xyz/tokens/ethereum/"+sc_input.toLowerCase()+"?buyChain=1&buyAddress="+sc_output.toLowerCase() +" target=_blank>"+priceDEX+"</a></br>"+PNL+"");
                            var currentRow = $("#dex_"+action+"_"+posisi).toggleClass(warna);
                            currentRow.append(); 
                         }
                    }, 0);             
                },
                
                error: function(xhr, status, error) {
                    // Jika terjadi error
                    if (status === "timeout") {
                        var warna="biru";
                        var alert = " DI SKIP ";
                    }else if (xhr.status === 0) {
                        var warna="sering";
                        var alert = "NO RESPONSE - SERING SCAN";
                    }else if (xhr.status == 200) {
                        var warna="error";
                        var alert = "RESPONSE KOSONG";
                    }else if (xhr.status == 429) {
                        var warna="error";
                        var alert = "KENA LIMIT";
                    } else if (xhr.status === 404) {
                        var warna="merah";
                        var alert = "Permintaan tidak ditemukan";
                    } else if (xhr.status === 400) {
                        var warna="merah";
                        var alert = "Bad Request";
                    } else if (xhr.status === 500) {
                        var warna="merah";
                        var alert = "Kesalahan server internal";
                    } else if (xhr.status === 503) {
                        var warna="merah";
                        var alert = "Layanan tidak tersedia";
                    } else if (xhr.responseJSON && xhr.responseJSON.error) {
                        var alert= xhr.responseJSON.error;
                    }else {
                        var warna="merah";
                        var alert=xhr.status;
                    }

                    if (action === "buy") {
                         $("#cex_sell_"+posisi).addClass(warna);
                    } 
                    
                    if (action === "sell") {
                        $("#cex_buy_"+posisi).addClass(warna);
                    }

                    var currentRow = $("#dex_"+action+"_"+posisi).html("  <a href=https://matcha.xyz/tokens/ethereum/"+sc_input +" title='"+alert+"' target=_blank>ERROR</a>").toggleClass(warna);
                   // var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=# title='"+alert+"'>ERROR</a>").toggleClass(warna);
                    currentRow.append();
                },
                complete: function (){
                    selesaiProsesAnggota();
                },
                });
        }
        
        function calculateSignatureOKEX( timestamp, method,queryString,secretKey) {
         // const secretKey = "183E0893CFA33CBFC2ADFAEB4592B806"; 
          const dataToSign = timestamp + method + queryString;
          const signature = CryptoJS.enc.Base64.stringify(CryptoJS.HmacSHA256(dataToSign, secretKey));
          return signature;
        }

        function cekHargaOKEX(modal,sc_input, des_input, sc_output, des_output, amount_in, price, action, symbol, posisi,wd,ServerCORS,volsell,PriceRate) {
            
            var KiriOKEXSinyal = parseInt(localStorage.getItem('GME_KiriOKEXSinyal'));
            var KananOKEXSinyal = parseInt(localStorage.getItem('GME_KananOKEXSinyal'));
         
            var ISERVERCORS = parseInt(localStorage.getItem('GME_SERVERCORS'));
            var ServerCORS = (action === "sell") ? (parseInt(ServerCORS) + parseInt(groupSize)) : ServerCORS;   
         
            var amount_in =parseInt(Math.pow(10, des_input) * amount_in);

            var gasGWEI = localStorage.getItem('GME_gasGWEI');
            var PriceETH = localStorage.getItem('GME_PriceETH');

            var symbol2=GantiSymbol(symbol,"_USDT","");
            var symbol1=GantiSymbol(symbol,"_USDT","");

                const ApiKeyOKEX = "6125cb19-7369-491e-9f6b-1cd03b3973bf";
                const secretKeyOKEX = "18CF342514BE83CAF80B55C2A330CD9B";
                const PassphraseOKEX = "Macpro-2023";
                const timestamp = Date.now().toString(); 
                const method = "GET";          
                const queryString = "/api/v5/dex/aggregator/quote?amount="+amount_in+"&chainId=1&fromTokenAddress="+sc_input+"&toTokenAddress="+sc_output;
                const signature = calculateSignatureOKEX(
                    timestamp,
                    method,
                    queryString,
                    secretKeyOKEX
                );

                    const apiUrl = GME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+"https://www.okx.com";
                    const headers = {
                    "OK-ACCESS-KEY": ApiKeyOKEX,
                    "OK-ACCESS-SIGN": signature,
                    "OK-ACCESS-TIMESTAMP": timestamp,
                    "OK-ACCESS-PASSPHRASE": PassphraseOKEX,
                    };

                    $.ajax({
                        url:apiUrl+queryString,
                        method: 'GET',
                        headers: headers,
                        timeout:parseInt(GME_savedData.waktuTunggu)*1000,
                        beforeSend: function() {
                        $("#dex_"+action+"_"+posisi).html('load..');
                    },
                    success: function(response, textStatus, xhr) {  
                    setTimeout(function() {
                    if (xhr.status === 200 && !response) {
                        // Tangani kasus ketika status 200 tapi tidak ada respons
                        var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=# title='NO RESPONSE'>ERROR</a>").toggleClass("error");
                    } else {

                            var amount_out =response.data[0].toTokenAmount/Math.pow(10,des_output);
                            var FeeSwap = ((response.data[0].estimateGasFee/ Math.pow(10, 9))*gasGWEI)*PriceETH;

                            if(action=="sell"){
                               
                                var PNL=Number(amount_out-modal) ;
                                var priceDEX = ((Number(modal)+PNL)/(modal/price)).toFixed(9); ; 
                                
                                var totalFee = parseFloat(modal * 0.001)+parseFloat(wd)+parseFloat(FeeSwap) ;
                                var selisihPersen = ((priceDEX - price) / price) * 100;

                                $("#cex_buy_"+posisi).html("<a href=https://www.gate.io/trade/"+symbol+" target=_blank title='"+GME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+"'><label class=uk-text-primary>" + price + " </label></a> <a href=https://www.gate.io/myaccount/withdraw/"+symbol2+" target=_blank> <br/> <label class=uk-text-primary> WD:"+ (wd).toFixed(2) +"#SW:"+(FeeSwap).toFixed(2) +"</a>");
                              
                                console.log("--- OKEX KIRI : "+ symbol +" ---  ");
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY CEX : " + price);
                                console.log(" SELL DEX : " + priceDEX);
                                console.log(" AMOUNT : " + amount_out);
                                console.log(" PNL : " + PNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" FEE SWAP : " + FeeSwap);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log(" WD : " + wd);
                                console.log("-------------------------  ");

                            }

                            if(action=="buy"){
                        
                                var amount_out = parseFloat(response.data[0].toTokenAmount)/Math.pow(10, des_output);
                                var priceDEX = parseFloat(modal/amount_out).toFixed(9); 
                                var PNL =(amount_out*price)-modal;
                                var selisihPersen = ((price - priceDEX) / priceDEX) * 100;
                                var totalFee = parseFloat(modal * 0.001)+parseFloat(FeeSwap) ;
                                
                                $("#cex_sell_"+posisi).html("<a href=https://www.gate.io/trade/"+symbol+" target=_blank title='"+GME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+"'><label class=uk-text-danger>" + price + "</a> </label> <a href=https://www.gate.io/myaccount/deposit/"+symbol2+" target=_blank> <br/> <label class=uk-text-primary><label class=uk-text-warning>#SW:"+FeeSwap.toFixed(2)+"$ [DP]</label></a>");
                                
                                console.log("--- OKEX KANAN: "+ symbol +" ---  ");
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY DEX : " + priceDEX);
                                console.log(" SELL CEX : " + price);
                                console.log(" PNL : " + PNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" FEE SWAP : " + FeeSwap);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log("-------------------------  ");
                            }

                            if (GME_savedDataModal.FilterPNL==0) {
                                $('#LFilterPNL').text('> FEE');
                                var filterPNLValue = totalFee+0.1;                                
                            }else{
                                var filterPNLValue = parseFloat(GME_savedDataModal.FilterPNL);
                            }

                            if( PNL>filterPNLValue){
                                if(action=="sell"){
                                    var jKiriOKEXSinyal = KiriOKEXSinyal+1;
                                    localStorage.setItem("GME_KiriOKEXSinyal",jKiriOKEXSinyal)
                                    $("#lKiriOKEXSinyal").text(localStorage.getItem('GME_KiriOKEXSinyal')); 

                                    var sLink = "<a href=#cex_buy_"+posisi+" class='sell-link'>"+symbol2+"</a>";
                                    $("#sinyalokex").append(sLink + ' | ');
                                    $("a.sell-link").css('color', 'green');
                                    $("#cex_buy_"+posisi).addClass('ijo');

                                    var message = 
                                        "#<b>"+localStorage.getItem('GME_idserver')+ ": ARB OKEX</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KIRI : <b>#" + symbol2 + "</b> <a href='https://arbiscan.io/address/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://arbiscan.io/token/" + sc_input + "?a=0xB38e8c17e38363aF6EbdCb3dAE12e0243582891D'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                        " \n <b>BUY : </b><a href='https://www.gate.io/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price + "</a>" +
                                        " \n <b>SELL : </b> <a href='https://app.OKEXocean.finance/CLASSIC#/arbitrum/USDT/" + symbol2 +"' target='_blank'>" + priceDEX + "</a>" +
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n --------------------------------------\n #"+GME_savedDataID.id+" \n "+GME_savedDataID.name+" ";
                                   // MultisendMessage(message);
                                }

                                if(action=="buy"){
                                    var jKananOKEXSinyal = KananOKEXSinyal+1;
                                    localStorage.setItem("GME_KananOKEXSinyal",jKananOKEXSinyal)
                                    $("#lKananOKEXSinyal").text(localStorage.getItem('GME_KananOKEXSinyal')); 

                                    var sLink = "<a href=#cex_sell_"+posisi+" class='buy-link'>"+symbol2+"</a>";
                                    $("#sinyalokex").append(sLink + ' | ');
                                    $("a.buy-link").css('color', 'red');
                                    $("#cex_sell_"+posisi).addClass('ijo');

                                    var message = 
                                        "#<b>"+localStorage.getItem('GME_idserver')+ ": ARB OKEX</b>" +
                                        " \n -----------------------------------------" +
                                        " \n KANAN : <b>#" + symbol2 + "</b> <a href='https://arbiscan.io/address/" + sc_input + "'>[ SC ]</a>" +
                                        "  <a href='https://arbiscan.io/token/" + sc_input + "?a=0xB38e8c17e38363aF6EbdCb3dAE12e0243582891D'>[ STOK ]</a>" +
                                        " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                       // https://www.okx.com/web3/dex-swap?inputChain=1&inputCurrency=0xdac17f958d2ee523a2206206994597c13d831ec7&outputChain=1&outputCurrency=0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
                                        " \n <b>BUY : </b> <a href='https://app.OKEXocean.finance/CLASSIC#/arbitrum/" + symbol2 +"/USDT target='_blank'>" + priceDEX + "</a>" +
                                        " \n <b>SELL : </b><a href='https://www.gate.io/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price+ "</a>" +
                                        " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                        " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                        " \n --------------------------------------\n #"+GME_savedDataID.id+" \n "+GME_savedDataID.name+" ";
                                   // MultisendMessage(message);
                                }

                                var warna="ijo";
                                var PNL="<span class='uk-text-danger'>PNL:</span>("+PNL.toFixed(2)+"#<span class='uk-label uk-label-success'>"+(PNL-totalFee).toFixed(2)+")</span>";
                            }else{
                                var warna="";
                                var PNL="<span class='uk-text-danger'>PNL:</span>("+PNL.toFixed(2)+"#<span class='uk-text-danger'>"+(PNL-totalFee).toFixed(2)+")</span>";
                            }
                            var currentRow = $("#dex_"+action+"_"+posisi).html("  <a href='https://www.okx.com/web3/dex-swap?inputChain=1&inputCurrency="+sc_input+"&outputChain=1&outputCurrency="+sc_output+"'  target=_blank>"+priceDEX+"</a></br>"+PNL+"");
                            var currentRow = $("#dex_"+action+"_"+posisi).toggleClass(warna);
                            currentRow.append(); 
                        }
                    }, 0);             
                },
                error: function(xhr, status, error) {
                    // Jika terjadi error
                    if (status === "timeout") {
                        var warna="biru";
                        var alert = " DI SKIP ";
                    }else if (xhr.status === 0) {
                        var warna="sering";
                        var alert = "NO RESPONSE - SERING SCAN";
                    }else if (xhr.status == 200) {
                        var warna="error";
                        var alert = "RESPONSE KOSONG";
                    }else if (xhr.status == 429) {
                        var warna="error";
                        var alert = "KENA LIMIT";
                    } else if (xhr.status === 404) {
                        var warna="merah";
                        var alert = "Permintaan tidak ditemukan";
                    } else if (xhr.status === 400) {
                        var warna="merah";
                        var alert = "Bad Request";
                    } else if (xhr.status === 500) {
                        var warna="merah";
                        var alert = "Kesalahan server internal";
                    } else if (xhr.status === 503) {
                        var warna="merah";
                        var alert = "Layanan tidak tersedia";
                    } else if (xhr.responseJSON && xhr.responseJSON.error) {
                        var alert= xhr.responseJSON.error;
                    } else {
                        var warna="merah";
                        var alert=xhr.status;
                    }

                    if (action === "buy") {
                        $("#cex_sell_"+posisi).addClass(warna);
                    } 
                    
                    if (action === "sell") {
                        $("#cex_buy_"+posisi).addClass(warna);
                    }

                    var currentRow = $("#dex_"+action+"_"+posisi).html("  <a href='https://www.okx.com/web3/dex-swap?inputChain=1&inputCurrency="+sc_input+"&outputChain=1&outputCurrency="+sc_output+"' title='"+alert+"'  target=_blank>ERROR</a>").toggleClass(warna);
                    currentRow.append();
                },
                complete: function (){
                    selesaiProsesAnggota();
                },
                });
            }

        function cekHargaSWOOP(modal,sc_input, des_input, sc_output, des_output, amount, price, action, symbol, posisi,wd,cex,PriceRate,ServerCORS) {
            
            var amount_in = Math.pow(10, des_input) * amount;
            var amount_in = BigInt(Math.round(Number(amount_in)));

            var gasGWEI = localStorage.getItem('GME_gasGWEI');
            var PriceETH = localStorage.getItem('GME_PriceETH');
            var USDTGasETH = localStorage.getItem('GME_USDTGasETH');
            
            var symbol2=GantiSymbol(symbol,"_USDT","");
            var symbol1=GantiSymbol(symbol,"_USDT","");
            
            $("#LPriceRate").text(" " + PriceRate + "$");

            var ServerCORS = (action === "sell") ? (parseInt(ServerCORS) + parseInt(groupSize)) : ServerCORS;
            var ISERVERCORS = parseInt(localStorage.getItem('GME_SERVERCORS'));
            var payload = {
                "chainId": 1,
                "aggregatorSlug": cex,
                "sender": "0x2315FAa4CE7A4cEA50Ae9DEC252Be620c6e454ca",
                "inToken": {
                    "chainId": 1,
                    "type": "TOKEN",
                    "address": sc_input,
                    "decimals": parseFloat(des_input)
                },
                "outToken": {
                    "chainId": 1,
                    "type": "TOKEN",
                    "address": sc_output,
                    "decimals": parseFloat(des_output)
                },
                "amountInWei":String(amount_in),
                "slippageBps": "100",
                "gasPriceGwei": Number(gasGWEI),
            };

            $.ajax({
               //url: GME_savedData.SERVERCORS[ISERVERCORS][ServerCORS]+'https://swoop-backend.up.railway.app/swap',
                url: 'https://swoop-backend.up.railway.app/swap',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify(payload),
                timeout:parseInt(GME_savedData.waktuTunggu)*1000,
                beforeSend: function() {
                    $("#dex_"+action+"_"+posisi).html('load..');
                },
                success: function(response, textStatus, xhr) {  
                    console.log(response);
                    setTimeout(function() {
                    if (xhr.status === 200 && !response) {
                        var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=# title='NO RESPONSE'>ERROR</a>").toggleClass("error");
                    }
                     else {
                        //  console.error(url);
                        var amount_out = parseFloat(response.amountOutWei)/Math.pow(10, des_output);
                       // var FeeSwap = ((response.feeWei/ Math.pow(10, 18))*2)*PriceETH;
                       
                            if(action=="sell"){
                                var FeeSwap = ((response.feeWei/ Math.pow(10, 18))*gasGWEI)*PriceETH;
                                var PNL=parseFloat((amount_out*PriceRate)-modal) ;
                                var priceDEX =((Number(modal)+PNL)/(modal/price)).toFixed(8); 

                                var totalFee = parseFloat(modal * 0.001)+parseFloat(wd)+parseFloat(FeeSwap) ;
                                var selisihPersen = ((priceDEX - price) / price) * 100;


                                console.log("---- "+cex+" KIRI : "+ symbol +" ---  ");
                                console.log(" GWEI : " + gasGWEI);
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY CEX : " + price);
                                console.log(" SELL DEX : " + priceDEX);
                                console.log(" Filter PNL : " + GME_savedData.FilterPNL);
                                console.log(" PNL : " + PNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" WD : " + wd);
                                console.log(" FEEWEI : " + (response.feeWei/ Math.pow(10, des_output)*price));
                                console.log(" FEE SWAP : " + FeeSwap.toFixed(2));
                                console.log(" PERSEN : " + selisihPersen);
                                console.log("-------------------------  ");  
                               
                                $("#cex_buy_"+posisi).html("<a href=https://www.gate.io/trade/"+symbol+" target=_blank><label class=uk-text-primary>" + price + " </label></a> <a href=https://www.gate.io/myaccount/withdraw/"+symbol2+" target=_blank> <br/> WD:"+ (wd).toFixed(2) +"#SW:"+(FeeSwap).toFixed(2)+" </a>");
                            }

                            if(action=="buy"){         
                                var FeeSwap = ((response.feeWei/ Math.pow(10, des_output)))*price;
                                var priceDEX=parseFloat(modal/amount_out).toFixed(8); 
                                var PNL =parseFloat(((modal/priceDEX)*price)-modal);

                                var totalFee = parseFloat(modal * 0.001)+parseFloat(FeeSwap) ;
                                var selisihPersen = ((price - priceDEX) / priceDEX) * 100;

                               

                                console.log("---- "+cex+" KANAN: "+ symbol +" ---  ");
                                console.log(" DESIMAL : " + des_output);
                                console.log(" GWEI : " + gasGWEI);
                                console.log(" MODAL : " + modal);
                                console.log(" AMOUNT : " + amount_in);                        
                                console.log(" BUY DEX : " + priceDEX);
                                console.log(" SELL CEX : " + price);
                                console.log(" Filter PNL : " + GME_savedData.FilterPNL);
                                console.log(" PNL : " + PNL);
                                console.log(" TOTAL FEE : " + totalFee);
                                console.log(" PERSEN : " + selisihPersen);
                                console.log(" FEE SWAP : " + response.feeWei/ Math.pow(10, des_output)*gasGWEI);
                                console.log("-------------------------  ");
                                $("#cex_sell_"+posisi).html("<a href=https://www.gate.io/trade/"+symbol+" target=_blank ><label class=uk-text-danger>" + price + "</a> </label> <a href=https://www.gate.io/myaccount/deposit/"+symbol2+" target=_blank> <br/> <label class=uk-text-primary><label class=uk-text-warning>#SW:"+FeeSwap.toFixed(2)+"$ [DP]</label></a>");
                            }

                            if (GME_savedData.FilterPNL==0) {
                                $('#LFilterPNL').text('> FEE TOTAL');
                                var filterPNLValue = totalFee+0.2;                               
                            }else{
                                var filterPNLValue = parseFloat(GME_savedData.FilterPNL);
                            }

                            if(PNL>filterPNLValue){                                  

                            // Definisikan bagian yang ingin diganti
                                    var oldPart = '1inch';
                                    var newPart = cex.toUpperCase(); // Ubah cex menjadi huruf kapital untuk konsistensi

                                    // Fungsi untuk memperbarui sinyal dan elemen HTML
                                    function updateSinyal(side, action) {
                                        // Nama variabel dan kunci localStorage baru
                                        var oldVarName = side + oldPart + 'Sinyal';
                                        var newVarName = side + newPart + 'Sinyal';
                                        var oldLocalStorageKey = 'GME_' + side + oldPart + 'Sinyal';
                                        var newLocalStorageKey = 'GME_' + side + newPart + 'Sinyal';
                                        var oldElementID = '#l' + side + oldPart + 'Sinyal';
                                        var newElementID = '#l' + side + newPart + 'Sinyal';

                                        // Ambil nilai saat ini dari localStorage atau default ke 0
                                        var currentSinyal = parseInt(localStorage.getItem(oldLocalStorageKey) || "0", 10);

                                        // Hitung nilai baru
                                        var newSinyal = currentSinyal + 1;

                                        // Simpan hasil ke localStorage dengan kunci yang baru
                                        localStorage.setItem(newLocalStorageKey, newSinyal);

                                        // Update elemen HTML dengan nilai terbaru
                                        $(newElementID).text(localStorage.getItem(newLocalStorageKey));

                                        // Update link dan warna berdasarkan aksi
                                        var sLink = action === "sell" ? "<a href=#cex_buy_" + posisi + " class='sell-link'>" + symbol2 + "</a>" :
                                                                        "<a href=#cex_sell_" + posisi + " class='buy-link'>" + symbol2 + "</a>";
                                        $("#sinyal" + newPart).append(sLink + ' | ');

                                        // CSS untuk link
                                        $("a." + (action === "sell" ? 'sell-link' : 'buy-link')).css('color', action === "sell" ? 'green' : 'red');
                                        $("#cex_" + (action === "sell" ? 'buy' : 'sell') + "_" + posisi).addClass('ijo');

                                        // Buat pesan
                                        var message =
                                            "#INFO_<b>" + localStorage.getItem('GME_idserver') + ":" + newPart + "</b>" +
                                            " \n -----------------------------------------" +
                                            " \n " + (action === "sell" ? "KIRI" : "KANAN") + " : <b>#" + symbol2 + "</b> <a href='https://arbiscan.io/address/" + sc_input + "'>[ SC ]</a>" +
                                            "  <a href='https://arbiscan.io/token/" + sc_input + "?a=0x0D0707963952f2fBA59dD06f2b425ace40b492Fe'>[ STOK ]</a>" +
                                            " \n MODAL : <b> " + modal + "</b> | PNL : <b>" + PNL.toFixed(2) + "$ </b> " +
                                            " \n <b>BUY : </b><a href='https://www.gate.io/trade/" + symbol + "?from=markets%26theme=light%26type=spot'>" + price + "</a>" +
                                            " \n <b>SELL : </b> <a href='https://app.swoop.exchange/' target='_blank'>" + priceDEX + "</a>" +
                                            " \n FEE SWAP : <b>" + FeeSwap.toFixed(2) + "$</b>" +
                                            " \n FEE TOTAL : <b>" + totalFee.toFixed(2) + "$</b>" +
                                            " \n -----------------------------------------";
                                    // MultisendMessage(message);
                                    }

                                    // Menentukan aksi berdasarkan kondisi
                                    if (action === "sell") {
                                        updateSinyal('Kiri', 'sell');
                                    } else if (action === "buy") {
                                        updateSinyal('Kanan', 'buy');
                                    }

                                var warna="ijo";
                                var PNL="<span class='uk-text-danger'>PNL:</span>("+PNL.toFixed(2)+"#<span class='uk-label uk-label-success'>"+(PNL-totalFee).toFixed(2)+"</span>)";
                            }else{
                                var warna="";
                                var PNL="<span class='uk-text-danger'>PNL:</span>("+PNL.toFixed(2)+"#<span class='uk-text-danger'>"+(PNL-totalFee).toFixed(2)+"</span>)";
                            }
                            if(cex=='1inch'){
                                var currentRow = $("#dex_"+action+"_"+posisi).html("<a href=https://app.1inch.io/#/1/advanced/swap/"+sc_input+"/"+sc_output+" target=_blank>"+priceDEX+"</a></br>"+PNL+"");
                            }else if(cex=='odos'){
                                var currentRow = $("#dex_"+action+"_"+posisi).html("  <a href=https://app.odos.xyz target=_blank>"+priceDEX+"</a></br>"+PNL+"");
                            }else if(cex=='okx'){                               
                                var currentRow = $("#dex_"+action+"_"+posisi).html("  <a href='https://www.okx.com/web3/dex-swap?inputChain=1&inputCurrency="+sc_input+"&outputChain=1&outputCurrency="+sc_output+"'  target=_blank>"+priceDEX+"</a></br>"+PNL+"");
                            }else{                                                        
                                var currentRow = $("#dex_"+action+"_"+posisi).html("<a href=https://app.swoop.exchange/ target=_blank>"+priceDEX+"</a></br>"+PNL+"");
                            }
                            var currentRow = $("#dex_"+action+"_"+posisi).toggleClass(warna);
                            currentRow.append();
                        }
                    }, 0);
                },
                error: function (xhr, status, error) {
                    if (status === "timeout") {
                        var warna="biru";
                        var alert = " DI SKIP ";
                    }else if (xhr.status === 0) {
                        var warna="limit";
                        var alert = "NOL RESPONSE - SERING SCAN";
                    }else if (xhr.status == 200) {
                        var warna="limit";
                        var alert = "RESPONSE KOSONG";
                    }else if (xhr.status == 429) {
                        var warna="limit";
                        var alert = "KENA LIMIT";
                    } else if (xhr.status === 501) {
                        var warna="merah";
                        var alert = "KENA LIMIT"
                    } else if (xhr.status === 404) {
                        var warna="merah";
                        var alert = "Permintaan tidak ditemukan";
                    } else if (xhr.status === 400) {
                        var warna="merah";                        
                        var errorResponse = JSON.parse(xhr.responseText);
                            if (errorResponse && errorResponse.description=="insufficient liquidity") {
                                var alert = "NO LP";
                            }else {
                                var alert = "KONEKSI BURUK";
                            } 
                    }
                     else if (xhr.status === 500) {
                        var warna="merah";
                        var alert = "Kesalahan server internal";
                    } else if (xhr.status === 503) {
                        var warna="merah";
                        var alert = "Layanan tidak tersedia";
                    }else if (xhr.responseJSON && xhr.responseJSON.error) {
                        var alert= xhr.responseJSON.error;
                    } else {
                        var warna="merah";
                        var alert=xhr.status;
                    }

                        if (action === "buy") {
                         $("#cex_sell_"+posisi).addClass(warna);
                        } 
                        
                        if (action === "sell") {
                            $("#cex_buy_"+posisi).addClass(warna);
                        }

                            if(cex=='1inch'){
                                var currentRow = $("#dex_"+action+"_"+posisi).html("<a href='https://app.1inch.io/#/1/advanced/swap/"+sc_input+"/"+sc_output+"' title='"+alert+"' target=_blank>ERROR</a>");
                            }else if(cex=='odos'){
                                var currentRow = $("#dex_"+action+"_"+posisi).html("  <a href='https://app.odos.xyz' title='"+alert+"' target=_blank>ERROR</a>");
                            }else if(cex=='okx'){
                            var currentRow = $("#dex_"+action+"_"+posisi).html("  <a href='https://www.okx.com/web3/dex-swap?inputChain=1&inputCurrency="+sc_input+"&outputChain=1&outputCurrency="+sc_output+"' title='"+alert+"' target=_blank>ERROR</a>");
                            }else{
                                var currentRow = $("#dex_"+action+"_"+posisi).html("<a href='https://app.swoop.exchange/' title='"+alert+"' target=_blank>ERROR</a>");
                            }
                       // var currentRow= $("#dex_"+action+"_"+posisi).html("<a href=https://app.1inch.io/#/42161/advanced/swap/"+sc_input+"/"+sc_output+" title='"+alert+"' target=_blank>ERROR</a>").toggleClass(warna);
                        var currentRow = $("#dex_"+action+"_"+posisi).toggleClass(warna);
                        currentRow.append();
                },
                complete: function (){
                    selesaiProsesAnggota();
                },
                });
     
        }
     
        function Scanning(coins,index){
               
                feeGasGwei();
                
                var statusChecked = coins.status ? 'checked' : '';      
                            var symbol1=GantiSymbol(coins.symbol,"_USDT","");
                            var symbol2=GantiSymbol(coins.symbol,"_USDT","");

                            WalletGate(symbol2);

                             var linkStok= ' [ <a href="https://etherscan.io/token/'+coins.sc+'?a=0x0D0707963952f2fBA59dD06f2b425ace40b492Fe" target="_blank"> STOK </a>]';
                                    //cek harga modal kecil dari kiri
                                    if ($('#ls').is(':checked')) {
                                        if ($('#D1INCH').is(':checked')) {
                                            getPriceGate(coins,GME_savedDataModal.mKiriKecil1INCH,index+1, function(error, result) {
                                                if (!error) {
                                                    if (result !== null) {
                                                        cekHarga1INCH(result.modal,coins.sc, coins.desimal, GME_savedData.scAddressPair, GME_savedData.desPair, result.amount_in_sell, result.price_buy ,"sell",coins.symbol,"mk_bin_1inch_"+symbol2+"","https://api.1inch.dev/swap",result.feeWD,index,result.volsell,result.PriceRate,function(error, response) {});
                                                        
                                                        /*    
                                                        if ($('#kiriSWOOP').is(':checked')) {
                                                            cekHargaSWOOP(result.modal ,coins.sc, coins.desimal, GME_savedData.scAddressPair, GME_savedData.desPair, result.amount_in_sell, result.price_buy ,"sell",coins.symbol,"mk_bin_1inch_"+symbol2+"",result.feeWD,"1inch",result.PriceRate,index,function(error, response) { });
                                                            console.warn(symbol2 + " KIRI 1INCH DENGAN SWOOP!");
                                                        }else{
                                                            cekHarga1INCH(result.modal,coins.sc, coins.desimal, GME_savedData.scAddressPair, GME_savedData.desPair, result.amount_in_sell, result.price_buy ,"sell",coins.symbol,"mk_bin_1inch_"+symbol2+"","https://api.1inch.dev/swap",result.feeWD,index,result.volsell,result.PriceRate,function(error, response) {});
                                                            console.warn(symbol2 + " KIRI DENGAN 1INCH!");
                                                        } 
                                                        */
                                                        
                                                     }                                                     
                                                }    
                                               
                                            });
                                           
                                        }   
                                        if ($('#DODOS').is(':checked')) {
                                            getPriceGate(coins,GME_savedDataModal.mKiriKecilODOS,index+1, function(error, result) {
                                                if (!error) {
                                                    if (result !== null) {
                                                        if ($('#kiriSWOOP').is(':checked')) {
                                                            cekHargaSWOOP(result.modal ,coins.sc, coins.desimal, GME_savedData.scAddressPair, GME_savedData.desPair, result.amount_in_sell, result.price_buy ,"sell",coins.symbol,"mk_bin_odos_"+symbol2+"",result.feeWD,"odos",result.PriceRate,index,function(error, response) {});
                                                            console.warn(symbol2 + " KIRI ODOS DENGAN SWOOP!");
                                                        }else{
                                                            cekHargaODOS(result.modal ,coins.sc, coins.desimal, GME_savedData.scAddressPair, GME_savedData.desPair, result.amount_in_sell, result.price_buy ,"sell",coins.symbol,"mk_bin_odos_"+symbol2+"",result.feeWD,index,result.volsell,result.PriceRate,function(error, response) {});
                                                            console.warn(symbol2 + " KIRI DENGAN ODOS!");
                                                        }                                                          
                                                    
                                                  }                                                     
                                                }    
                                            });
                                        }   
                                        if ($('#DMATCHA').is(':checked')) {
                                            getPriceGate(coins,GME_savedDataModal.mKiriKecilMATCHA,index+1, function(error, result) {
                                                if (!error) {
                                                    if (result !== null) {
                                                          cekHargaMATCHA(result.modal ,coins.sc, coins.desimal, GME_savedData.scAddressPair, GME_savedData.desPair, result.amount_in_sell, result.price_buy ,"sell",coins.symbol,"mk_bin_matcha_"+symbol2+"","6f5d5c4d-bfdd-4fc7-8d3f-d3137094feb5",result.feeWD,result.volsell,result.PriceRate,function(error, response) {
                                                            console.warn(symbol2 + " KIRI DENGAN MATCHA!");
                                                        });
                                                    }                                                     
                                                }  
                                            });
                                        } 
                                        if ($('#DOKEX').is(':checked')) {
                                            getPriceGate(coins,GME_savedDataModal.mKiriKecilMATCHA,index+1, function(error, result) {
                                                if (!error) {
                                                    if (result !== null) {
                                                        if ($('#kiriSWOOP').is(':checked')) {
                                                            cekHargaSWOOP(result.modal ,coins.sc, coins.desimal, GME_savedData.scAddressPair, GME_savedData.desPair, result.amount_in_sell, result.price_buy ,"sell",coins.symbol,"mk_bin_OKEX_"+symbol2+"",result.feeWD,"okx",result.PriceRate,index,function(error, response) { });
                                                            console.warn(symbol2 + " KIRI OKX DENGAN SWOOP!");
                                                        }else{
                                                            cekHargaOKEX(result.modal ,coins.sc, coins.desimal, GME_savedData.scAddressPair, GME_savedData.desPair, result.amount_in_sell, result.price_buy ,"sell",coins.symbol,"mk_bin_OKEX_"+symbol2+"",result.feeWD,index,result.volsell,result.PriceRate,function(error, response) {});
                                                            console.warn(symbol2 + " KIRI DENGAN OKX!");
                                                        } 
                                                    }                                                     
                                                }  
                                            });
                                        }  
                                    }
                            
                                

                                    //cek harga modal kecil dari kanan
                                    if ($('#rs').is(':checked')) {
                                        if ($('#D1INCH').is(':checked')) {
                                            getPriceGate(coins,GME_savedDataModal.mKananKecil1INCH,index+1, function(error, result) {
                                                if (!error) {
                                                    cekHarga1INCH(result.modal, GME_savedData.scAddressPair, GME_savedData.desPair,coins.sc, coins.desimal, result.amount_in_buy, result.price_sell ,"buy",coins.symbol,"mk_1inch_bin_"+symbol2+"","https://api.1inch.dev/swap",result.feeWD,index,0,result.PriceRate2,function(error, response) {});
                                                    /*
                                                    if ($('#kananSWOOP').is(':checked')) {
                                                        cekHargaSWOOP(result.modal , GME_savedData.scAddressPair, GME_savedData.desPair,coins.sc, coins.desimal, result.amount_in_buy, result.price_sell ,"buy",coins.symbol,"mk_1inch_bin_"+symbol2+"",result.feeWD,"1inch",result.PriceRate2,index,function(error, response){});
                                                        console.warn(symbol2 + " KANAN 1INCH DENGAN SWOOP!");
                                                    }else{
                                                        cekHarga1INCH(result.modal, GME_savedData.scAddressPair, GME_savedData.desPair,coins.sc, coins.desimal, result.amount_in_buy, result.price_sell ,"buy",coins.symbol,"mk_1inch_bin_"+symbol2+"","https://api.1inch.dev/swap",result.feeWD,index,0,result.PriceRate2,function(error, response) {});
                                                        console.warn(symbol2 + " KANAN DENGAN 1INCH!");
                                                    }
                                                    */
                                                } else {
                                                    console.error(error);
                                                }
                                            });
                                        }   
                                        if ($('#DODOS').is(':checked')) {
                                            getPriceGate(coins,GME_savedDataModal.mKananKecilODOS,index+1, function(error, result) {
                                                if (!error) {
                                                    if ($('#kananSWOOP').is(':checked')) {
                                                        cekHargaSWOOP(result.modal , GME_savedData.scAddressPair, GME_savedData.desPair,coins.sc, coins.desimal, result.amount_in_buy, result.price_sell ,"buy",coins.symbol,"mk_odos_bin_"+symbol2+"",result.feeWD,"odos",result.PriceRate2,index,function(error, response){});
                                                        console.warn(symbol2 + " KANAN ODOS DENGAN SWOOP!");
                                                    }else{
                                                        cekHargaODOS(result.modal , GME_savedData.scAddressPair, GME_savedData.desPair,coins.sc, coins.desimal, result.amount_in_buy, result.price_sell ,"buy",coins.symbol,"mk_odos_bin_"+symbol2+"",result.feeWD,index,0,result.PriceRate2,function(error, response) {});
                                                        console.warn(symbol2 + " KANAN DENGAN ODOS!");
                                                    }
                                                   
                                                   //
                                                } else {
                                                    console.error(error);
                                                }
                                            });
                                        }   
                                        if ($('#DMATCHA').is(':checked')) {
                                            getPriceGate(coins,GME_savedDataModal.mKananKecilMATCHA,index+1, function(error, result) {
                                                cekHargaMATCHA(result.modal , GME_savedData.scAddressPair, GME_savedData.desPair,coins.sc, coins.desimal, result.amount_in_buy, result.price_sell ,"buy",coins.symbol,"mk_matcha_bin_"+symbol2+"","6f5d5c4d-bfdd-4fc7-8d3f-d3137094feb5",result.feeWD,0,result.PriceRate2,function(error, response) {
                                                    });
                                            });
                                        }  
                                        if ($('#DOKEX').is(':checked')) {
                                            getPriceGate(coins,GME_savedDataModal.mKananKecilMATCHA,index+1, function(error, result) {
                                                if (!error) {
                                                    if ($('#kananSWOOP').is(':checked')) {
                                                        cekHargaSWOOP(result.modal , GME_savedData.scAddressPair, GME_savedData.desPair,coins.sc, coins.desimal, result.amount_in_buy, result.price_sell ,"buy",coins.symbol,"mk_OKEX_bin_"+symbol2+"",result.feeWD,"okx",result.PriceRate2,index,function(error, response){});
                                                        console.warn(symbol2 + " KANAN OKX DENGAN SWOOP!");
                                                    }else{
                                                        cekHargaOKEX(result.modal , GME_savedData.scAddressPair, GME_savedData.desPair,coins.sc, coins.desimal, result.amount_in_buy, result.price_sell ,"buy",coins.symbol,"mk_OKEX_bin_"+symbol2+"",result.feeWD,index,0,result.PriceRate2,function(error, response) {});
                                                        console.warn(symbol2 + " KANAN DENGAN OKX!");
                                                    }
                                                } else {
                                                    console.error(error);
                                                }
                                            });
                                        } 
                                    }
                            
                                  
                                    var linkDefillama="<span style=color:orange;><a href=https://swap.defillama.com/?chain=ethereum&from="+coins.sc+"&to="+GME_savedData.scAddressPair+" target=_blank> DEFILLAMA</a></span>";
                                    var linkUNIDEX ="<span style=color:orange;><a href=https://app.unidex.exchange/?chain=ethereum&from="+coins.sc+"&to="+GME_savedData.scAddressPair+" target=_blank> UNIDEX</a></span>";

                                    $("#TabelBINANCE").append(
                                        "<tr>" +
                                            "<td  id=vol1_buy_mk_bin_GATE_"+symbol2+"></td>" +
                                            "<td  class=dx_1inch id=cex_buy_mk_bin_1inch_"+symbol2+"></td>" +
                                        //    "<td  class=dx_1inch id=cex_buy_mb_bin_1inch_"+symbol2+"></td>" +
                                            "<td  class=dx_odos id=cex_buy_mk_bin_odos_"+symbol2+"></td>" +
                                          //  "<td  class=dx_odos id=cex_buy_mb_bin_odos_"+symbol2+"></td>" +
                                            "<td  class=dx_matcha id=cex_buy_mk_bin_matcha_"+symbol2+"></td>" +
                                            "<td  class=dx_okx id=cex_buy_mk_bin_OKEX_"+symbol2+"></td>" +
                                            "<td  rowspan=2 style=background-color:#c6d8f8;> <span id=wallet_"+symbol2+"></span> </br>  <input type=checkbox class=statusKoinCheckbox data-index="+ coins.symbol +"  " + statusChecked + ">"+linkStok+" <a href=https://etherscan.io/address/"+coins.sc+" target=_blank>[SC] </a><br/> "+linkDefillama+"<br/> "+linkUNIDEX+"</td>" +                 
                                            "<td  class=dx_1inch id=dex_buy_mk_1inch_bin_"+symbol2+"></td>" +    
                                           // "<td  class=dx_1inch id=dex_buy_mb_1inch_bin_"+symbol2+"></td>" +
                                            "<td  class=dx_odos id=dex_buy_mk_odos_bin_"+symbol2+"></td>" +    
                                           // "<td  class=dx_odos id=dex_buy_mb_odos_bin_"+symbol2+"></td>" +
                                            "<td  class=dx_matcha id=dex_buy_mk_matcha_bin_"+symbol2+"></td>" +    
                                            "<td  class=dx_okx id=dex_buy_mk_OKEX_bin_"+symbol2+"></td>" +
                                            "<td  id=vol1_sell_mk_bin_GATE_"+symbol2+"></td>" +   
                                                                                                                    
                                        "</tr>"+
                                        "<tr>" +
                                            "<td  id=vol2_buy_mk_bin_GATE_"+symbol2+"></td>" +
                                            "<td  class=dx_1inch id=dex_sell_mk_bin_1inch_"+symbol2+"></td>" +
                                            //"<td  class=dx_1inch id=dex_sell_mb_bin_1inch_"+symbol2+"></td>" +
                                            "<td  class=dx_odos id=dex_sell_mk_bin_odos_"+symbol2+"></td>" +
                                            //"<td  class=dx_odos id=dex_sell_mb_bin_odos_"+symbol2+"></td>" +
                                            "<td  class=dx_matcha id=dex_sell_mk_bin_matcha_"+symbol2+"></td>" +
                                            "<td  class=dx_okx id=dex_sell_mk_bin_OKEX_"+symbol2+"></td>" +
                                           // "<td>xxxxxx</td>" +                    
                                            "<td  class=dx_1inch id=cex_sell_mk_1inch_bin_"+symbol2+"></td>" +    
                                            //"<td  class=dx_1inch id=cex_sell_mb_1inch_bin_"+symbol2+"></td>" +
                                            "<td  class=dx_odos id=cex_sell_mk_odos_bin_"+symbol2+"></td>" +    
                                           // "<td  class=dx_odos id=cex_sell_mb_odos_bin_"+symbol2+"></td>" +
                                            "<td  class=dx_matcha id=cex_sell_mk_matcha_bin_"+symbol2+"></td>" +    
                                            "<td  class=dx_okx id=cex_sell_mk_OKEX_bin_"+symbol2+"></td>" +   
                                            "<td  id=vol2_sell_mk_bin_GATE_"+symbol2+"></td>" +                                                                    
                                        "</tr>"
                                    );            
                                    updateTableVisibility();
    
        }

        function updateProgress(totalscanned,token){            
            var countTrueStatus = localStorage.getItem("GME_TotalCoins");

            var mulai = parseInt(localStorage.getItem('GME_startTime'));
            var endTime = new Date().getTime(); // Waktu akhir setelah panggilan REST API berhasil

            var duration = (endTime - mulai)/1000; // Durasi panggilan API dalam milidetik
            localStorage.setItem("GME_duration",duration);


            var perulangan = totalscanned / countTrueStatus;
            $('#scanprogress').html('CHECK - '+token+' [ '+ totalscanned + ' / ' + countTrueStatus + ' coin] :: DURASI ['+parseFloat(duration/60).toFixed(2)+' Menit]').css("color", "blue");
            $('#bar').css('width', (totalscanned / countTrueStatus * 100) + '%');

            if(totalscanned >= countTrueStatus ){
                
                if(autorun == true){
                    $('#scanprogress').html('Mengulangi scanning dalam 7 detik.');
                    
                    setTimeout(function(){ 
                        $('tbody tr').remove();
                        var startTime = new Date().getTime();
                        localStorage.setItem('GME_startTime',startTime);
                        
                        setNullInfo()
                         
                        processTokenData(tokens, groupSize);
                    }, 7000);
                }else{
                    $('#scanprogress').html('SCANNING SELESAI!! DURASI ['+parseFloat(duration/60).toFixed(2)+' Menit]');
                    $("button#startSCAN.uk-button.uk-button-primary").show();
                }
            }
        }

        $("#refresh").click(function () {
            location.reload();
            //toastr.success('REFRESH DONE!!');
            alert("REFRESH AKAN DILAKUKAN...!!");
            $("button#startSCAN.uk-button.uk-button-primary").hide();
        });

        function MultisendMessage(message) {
                var users = [
                    { chat_id: 5606074884 }                
                   // { chat_id: GME_savedData.ID_GRUP}
                ];

                var token = GME_savedData.TOKEN;
                var apiUrl = 'https://api.telegram.org/bot' + token + '/sendMessage';

                // Loop melalui daftar pengguna
                for (var i = 0; i < users.length; i++) {
                var user = users[i];
                var chatId = user.chat_id; // Ganti dengan ID chat pengguna

                // Membuat permintaan POST menggunakan jQuery
                $.ajax({
                    url: apiUrl,
                    method: "POST",
                    data: {
                        chat_id: chatId,
                        text: message,
                        parse_mode: "HTML",
                        disable_wGME_page_preview: true
                    },
                    success: function(response) {
                        console.log("Message sent successfully");
                    },
                    error: function(xhr, status, error) {
                        console.log("Error sending message:", error);
                    }
                    });
                }
            }
                
        function sendStatusTELE(user,status){
              var users = [
              { chat_id: -1002103736583},
              // { chat_id: -4074010610 }
              ];
               
            var message = 
             "   #"+user.toUpperCase()+" is <b>[ "+status+" ]</b>";
            //  +
            //  " \n KIRI : <b> " + localStorage.getItem("SGX_modalKiri") + "$ </b> | KANAN : <b>" +  localStorage.getItem("SGX_modalKanan") +  "$ </b> "+
            //  " \n ---------------------------------------------" ;

            var token = "6554422567:AAHn2KErUWyl_RIDChwv49mfHf9lHf_OTgQ";        
            var apiUrl = 'https://api.telegram.org/bot' + token + '/sendMessage';

            // Loop melalui daftar pengguna
            for (var i = 0; i < users.length; i++) {
              var user = users[i];
              var chatId = user.chat_id; // Ganti dengan ID chat pengguna

              // Membuat permintaan POST menggunakan jQuery
              $.ajax({
                  url: apiUrl,
                  method: "POST",
                  data: {
                    chat_id: chatId,
                    text: message,
                    parse_mode: "HTML",
                    disable_wGME_page_preview: true
                  },
                  success: function(response) {
                    console.log("Message sent successfully");
                  },
                  error: function(xhr, status, error) {
                    console.log("Error sending message:", error);
                  }
                });
            }
        }
});
</script>

</body>
</html>
